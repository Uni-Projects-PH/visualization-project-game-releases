(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const c of u)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function o(u){const c={};return u.integrity&&(c.integrity=u.integrity),u.referrerPolicy&&(c.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?c.credentials="include":u.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(u){if(u.ep)return;u.ep=!0;const c=o(u);fetch(u.href,c)}})();function ui(i,r){return i==null||r==null?NaN:i<r?-1:i>r?1:i>=r?0:NaN}function Ta(i,r){return i==null||r==null?NaN:r<i?-1:r>i?1:r>=i?0:NaN}function vo(i){let r,o,a;i.length!==2?(r=ui,o=(p,d)=>ui(i(p),d),a=(p,d)=>i(p)-d):(r=i===ui||i===Ta?i:Ma,o=i,a=i);function u(p,d,_=0,y=p.length){if(_<y){if(r(d,d)!==0)return y;do{const g=_+y>>>1;o(p[g],d)<0?_=g+1:y=g}while(_<y)}return _}function c(p,d,_=0,y=p.length){if(_<y){if(r(d,d)!==0)return y;do{const g=_+y>>>1;o(p[g],d)<=0?_=g+1:y=g}while(_<y)}return _}function f(p,d,_=0,y=p.length){const g=u(p,d,_,y-1);return g>_&&a(p[g-1],d)>-a(p[g],d)?g-1:g}return{left:u,center:f,right:c}}function Ma(){return 0}function ka(i){return i===null?NaN:+i}const Sa=vo(ui),Ca=Sa.right;vo(ka).center;class dn extends Map{constructor(r,o=Ia){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:o}}),r!=null)for(const[a,u]of r)this.set(a,u)}get(r){return super.get(Gr(this,r))}has(r){return super.has(Gr(this,r))}set(r,o){return super.set(Ea(this,r),o)}delete(r){return super.delete(Aa(this,r))}}function Gr({_intern:i,_key:r},o){const a=r(o);return i.has(a)?i.get(a):o}function Ea({_intern:i,_key:r},o){const a=r(o);return i.has(a)?i.get(a):(i.set(a,o),o)}function Aa({_intern:i,_key:r},o){const a=r(o);return i.has(a)&&(o=i.get(a),i.delete(a)),o}function Ia(i){return i!==null&&typeof i=="object"?i.valueOf():i}function za(i){return i}function Oa(i,r,...o){return Ba(i,za,r,o)}function Ba(i,r,o,a){return function u(c,f){if(f>=a.length)return o(c);const p=new dn,d=a[f++];let _=-1;for(const y of c){const g=d(y,++_,c),v=p.get(g);v?v.push(y):p.set(g,[y])}for(const[y,g]of p)p.set(y,u(g,f));return r(p)}(i,0)}const Za=Math.sqrt(50),Na=Math.sqrt(10),Da=Math.sqrt(2);function di(i,r,o){const a=(r-i)/Math.max(0,o),u=Math.floor(Math.log10(a)),c=a/Math.pow(10,u),f=c>=Za?10:c>=Na?5:c>=Da?2:1;let p,d,_;return u<0?(_=Math.pow(10,-u)/f,p=Math.round(i*_),d=Math.round(r*_),p/_<i&&++p,d/_>r&&--d,_=-_):(_=Math.pow(10,u)*f,p=Math.round(i/_),d=Math.round(r/_),p*_<i&&++p,d*_>r&&--d),d<p&&.5<=o&&o<2?di(i,r,o*2):[p,d,_]}function Ra(i,r,o){if(r=+r,i=+i,o=+o,!(o>0))return[];if(i===r)return[i];const a=r<i,[u,c,f]=a?di(r,i,o):di(i,r,o);if(!(c>=u))return[];const p=c-u+1,d=new Array(p);if(a)if(f<0)for(let _=0;_<p;++_)d[_]=(c-_)/-f;else for(let _=0;_<p;++_)d[_]=(c-_)*f;else if(f<0)for(let _=0;_<p;++_)d[_]=(u+_)/-f;else for(let _=0;_<p;++_)d[_]=(u+_)*f;return d}function pn(i,r,o){return r=+r,i=+i,o=+o,di(i,r,o)[2]}function Fa(i,r,o){r=+r,i=+i,o=+o;const a=r<i,u=a?pn(r,i,o):pn(i,r,o);return(a?-1:1)*(u<0?1/-u:u)}function Ha(i,r){let o;for(const a of i)a!=null&&(o<a||o===void 0&&a>=a)&&(o=a);return o}function $a(i,r,o){i=+i,r=+r,o=(u=arguments.length)<2?(r=i,i=0,1):u<3?1:+o;for(var a=-1,u=Math.max(0,Math.ceil((r-i)/o))|0,c=new Array(u);++a<u;)c[a]=i+a*o;return c}function Ga(i){return i}var Wa=3,Wr=1e-6;function Ua(i){return"translate("+i+",0)"}function Va(i){return r=>+i(r)}function qa(i,r){return r=Math.max(0,i.bandwidth()-r*2)/2,i.round()&&(r=Math.round(r)),o=>+i(o)+r}function Ya(){return!this.__axis}function Xa(i,r){var o=[],a=null,u=null,c=6,f=6,p=3,d=typeof window<"u"&&window.devicePixelRatio>1?0:.5,_=1,y="y",g=Ua;function v(w){var M=a??(r.ticks?r.ticks.apply(r,o):r.domain()),T=u??(r.tickFormat?r.tickFormat.apply(r,o):Ga),A=Math.max(c,0)+p,D=r.range(),U=+D[0]+d,B=+D[D.length-1]+d,Q=(r.bandwidth?qa:Va)(r.copy(),d),k=w.selection?w.selection():w,X=k.selectAll(".domain").data([null]),G=k.selectAll(".tick").data(M,r).order(),F=G.exit(),V=G.enter().append("g").attr("class","tick"),tt=G.select("line"),C=G.select("text");X=X.merge(X.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),G=G.merge(V),tt=tt.merge(V.append("line").attr("stroke","currentColor").attr(y+"2",_*c)),C=C.merge(V.append("text").attr("fill","currentColor").attr(y,_*A).attr("dy","0.71em")),w!==k&&(X=X.transition(w),G=G.transition(w),tt=tt.transition(w),C=C.transition(w),F=F.transition(w).attr("opacity",Wr).attr("transform",function(q){return isFinite(q=Q(q))?g(q+d):this.getAttribute("transform")}),V.attr("opacity",Wr).attr("transform",function(q){var st=this.parentNode.__axis;return g((st&&isFinite(st=st(q))?st:Q(q))+d)})),F.remove(),X.attr("d",f?"M"+U+","+_*f+"V"+d+"H"+B+"V"+_*f:"M"+U+","+d+"H"+B),G.attr("opacity",1).attr("transform",function(q){return g(Q(q)+d)}),tt.attr(y+"2",_*c),C.attr(y,_*A).text(T),k.filter(Ya).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),k.each(function(){this.__axis=Q})}return v.scale=function(w){return arguments.length?(r=w,v):r},v.ticks=function(){return o=Array.from(arguments),v},v.tickArguments=function(w){return arguments.length?(o=w==null?[]:Array.from(w),v):o.slice()},v.tickValues=function(w){return arguments.length?(a=w==null?null:Array.from(w),v):a&&a.slice()},v.tickFormat=function(w){return arguments.length?(u=w,v):u},v.tickSize=function(w){return arguments.length?(c=f=+w,v):c},v.tickSizeInner=function(w){return arguments.length?(c=+w,v):c},v.tickSizeOuter=function(w){return arguments.length?(f=+w,v):f},v.tickPadding=function(w){return arguments.length?(p=+w,v):p},v.offset=function(w){return arguments.length?(d=+w,v):d},v}function Ka(i){return Xa(Wa,i)}var ja={value:()=>{}};function yo(){for(var i=0,r=arguments.length,o={},a;i<r;++i){if(!(a=arguments[i]+"")||a in o||/[\s.]/.test(a))throw new Error("illegal type: "+a);o[a]=[]}return new li(o)}function li(i){this._=i}function Ja(i,r){return i.trim().split(/^|\s+/).map(function(o){var a="",u=o.indexOf(".");if(u>=0&&(a=o.slice(u+1),o=o.slice(0,u)),o&&!r.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:a}})}li.prototype=yo.prototype={constructor:li,on:function(i,r){var o=this._,a=Ja(i+"",o),u,c=-1,f=a.length;if(arguments.length<2){for(;++c<f;)if((u=(i=a[c]).type)&&(u=Qa(o[u],i.name)))return u;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++c<f;)if(u=(i=a[c]).type)o[u]=Ur(o[u],i.name,r);else if(r==null)for(u in o)o[u]=Ur(o[u],i.name,null);return this},copy:function(){var i={},r=this._;for(var o in r)i[o]=r[o].slice();return new li(i)},call:function(i,r){if((u=arguments.length-2)>0)for(var o=new Array(u),a=0,u,c;a<u;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(c=this._[i],a=0,u=c.length;a<u;++a)c[a].value.apply(r,o)},apply:function(i,r,o){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var a=this._[i],u=0,c=a.length;u<c;++u)a[u].value.apply(r,o)}};function Qa(i,r){for(var o=0,a=i.length,u;o<a;++o)if((u=i[o]).name===r)return u.value}function Ur(i,r,o){for(var a=0,u=i.length;a<u;++a)if(i[a].name===r){i[a]=ja,i=i.slice(0,a).concat(i.slice(a+1));break}return o!=null&&i.push({name:r,value:o}),i}var _n="http://www.w3.org/1999/xhtml";const Vr={svg:"http://www.w3.org/2000/svg",xhtml:_n,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function bi(i){var r=i+="",o=r.indexOf(":");return o>=0&&(r=i.slice(0,o))!=="xmlns"&&(i=i.slice(o+1)),Vr.hasOwnProperty(r)?{space:Vr[r],local:i}:i}function th(i){return function(){var r=this.ownerDocument,o=this.namespaceURI;return o===_n&&r.documentElement.namespaceURI===_n?r.createElement(i):r.createElementNS(o,i)}}function eh(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function wo(i){var r=bi(i);return(r.local?eh:th)(r)}function ih(){}function Pn(i){return i==null?ih:function(){return this.querySelector(i)}}function nh(i){typeof i!="function"&&(i=Pn(i));for(var r=this._groups,o=r.length,a=new Array(o),u=0;u<o;++u)for(var c=r[u],f=c.length,p=a[u]=new Array(f),d,_,y=0;y<f;++y)(d=c[y])&&(_=i.call(d,d.__data__,y,c))&&("__data__"in d&&(_.__data__=d.__data__),p[y]=_);return new gt(a,this._parents)}function rh(i){return i==null?[]:Array.isArray(i)?i:Array.from(i)}function oh(){return[]}function xo(i){return i==null?oh:function(){return this.querySelectorAll(i)}}function sh(i){return function(){return rh(i.apply(this,arguments))}}function ah(i){typeof i=="function"?i=sh(i):i=xo(i);for(var r=this._groups,o=r.length,a=[],u=[],c=0;c<o;++c)for(var f=r[c],p=f.length,d,_=0;_<p;++_)(d=f[_])&&(a.push(i.call(d,d.__data__,_,f)),u.push(d));return new gt(a,u)}function Lo(i){return function(){return this.matches(i)}}function Po(i){return function(r){return r.matches(i)}}var hh=Array.prototype.find;function uh(i){return function(){return hh.call(this.children,i)}}function lh(){return this.firstElementChild}function ch(i){return this.select(i==null?lh:uh(typeof i=="function"?i:Po(i)))}var fh=Array.prototype.filter;function dh(){return Array.from(this.children)}function ph(i){return function(){return fh.call(this.children,i)}}function _h(i){return this.selectAll(i==null?dh:ph(typeof i=="function"?i:Po(i)))}function mh(i){typeof i!="function"&&(i=Lo(i));for(var r=this._groups,o=r.length,a=new Array(o),u=0;u<o;++u)for(var c=r[u],f=c.length,p=a[u]=[],d,_=0;_<f;++_)(d=c[_])&&i.call(d,d.__data__,_,c)&&p.push(d);return new gt(a,this._parents)}function bo(i){return new Array(i.length)}function gh(){return new gt(this._enter||this._groups.map(bo),this._parents)}function pi(i,r){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=r}pi.prototype={constructor:pi,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,r){return this._parent.insertBefore(i,r)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};function vh(i){return function(){return i}}function yh(i,r,o,a,u,c){for(var f=0,p,d=r.length,_=c.length;f<_;++f)(p=r[f])?(p.__data__=c[f],a[f]=p):o[f]=new pi(i,c[f]);for(;f<d;++f)(p=r[f])&&(u[f]=p)}function wh(i,r,o,a,u,c,f){var p,d,_=new Map,y=r.length,g=c.length,v=new Array(y),w;for(p=0;p<y;++p)(d=r[p])&&(v[p]=w=f.call(d,d.__data__,p,r)+"",_.has(w)?u[p]=d:_.set(w,d));for(p=0;p<g;++p)w=f.call(i,c[p],p,c)+"",(d=_.get(w))?(a[p]=d,d.__data__=c[p],_.delete(w)):o[p]=new pi(i,c[p]);for(p=0;p<y;++p)(d=r[p])&&_.get(v[p])===d&&(u[p]=d)}function xh(i){return i.__data__}function Lh(i,r){if(!arguments.length)return Array.from(this,xh);var o=r?wh:yh,a=this._parents,u=this._groups;typeof i!="function"&&(i=vh(i));for(var c=u.length,f=new Array(c),p=new Array(c),d=new Array(c),_=0;_<c;++_){var y=a[_],g=u[_],v=g.length,w=Ph(i.call(y,y&&y.__data__,_,a)),M=w.length,T=p[_]=new Array(M),A=f[_]=new Array(M),D=d[_]=new Array(v);o(y,g,T,A,D,w,r);for(var U=0,B=0,Q,k;U<M;++U)if(Q=T[U]){for(U>=B&&(B=U+1);!(k=A[B])&&++B<M;);Q._next=k||null}}return f=new gt(f,a),f._enter=p,f._exit=d,f}function Ph(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function bh(){return new gt(this._exit||this._groups.map(bo),this._parents)}function Th(i,r,o){var a=this.enter(),u=this,c=this.exit();return typeof i=="function"?(a=i(a),a&&(a=a.selection())):a=a.append(i+""),r!=null&&(u=r(u),u&&(u=u.selection())),o==null?c.remove():o(c),a&&u?a.merge(u).order():u}function Mh(i){for(var r=i.selection?i.selection():i,o=this._groups,a=r._groups,u=o.length,c=a.length,f=Math.min(u,c),p=new Array(u),d=0;d<f;++d)for(var _=o[d],y=a[d],g=_.length,v=p[d]=new Array(g),w,M=0;M<g;++M)(w=_[M]||y[M])&&(v[M]=w);for(;d<u;++d)p[d]=o[d];return new gt(p,this._parents)}function kh(){for(var i=this._groups,r=-1,o=i.length;++r<o;)for(var a=i[r],u=a.length-1,c=a[u],f;--u>=0;)(f=a[u])&&(c&&f.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(f,c),c=f);return this}function Sh(i){i||(i=Ch);function r(g,v){return g&&v?i(g.__data__,v.__data__):!g-!v}for(var o=this._groups,a=o.length,u=new Array(a),c=0;c<a;++c){for(var f=o[c],p=f.length,d=u[c]=new Array(p),_,y=0;y<p;++y)(_=f[y])&&(d[y]=_);d.sort(r)}return new gt(u,this._parents).order()}function Ch(i,r){return i<r?-1:i>r?1:i>=r?0:NaN}function Eh(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this}function Ah(){return Array.from(this)}function Ih(){for(var i=this._groups,r=0,o=i.length;r<o;++r)for(var a=i[r],u=0,c=a.length;u<c;++u){var f=a[u];if(f)return f}return null}function zh(){let i=0;for(const r of this)++i;return i}function Oh(){return!this.node()}function Bh(i){for(var r=this._groups,o=0,a=r.length;o<a;++o)for(var u=r[o],c=0,f=u.length,p;c<f;++c)(p=u[c])&&i.call(p,p.__data__,c,u);return this}function Zh(i){return function(){this.removeAttribute(i)}}function Nh(i){return function(){this.removeAttributeNS(i.space,i.local)}}function Dh(i,r){return function(){this.setAttribute(i,r)}}function Rh(i,r){return function(){this.setAttributeNS(i.space,i.local,r)}}function Fh(i,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttribute(i):this.setAttribute(i,o)}}function Hh(i,r){return function(){var o=r.apply(this,arguments);o==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,o)}}function $h(i,r){var o=bi(i);if(arguments.length<2){var a=this.node();return o.local?a.getAttributeNS(o.space,o.local):a.getAttribute(o)}return this.each((r==null?o.local?Nh:Zh:typeof r=="function"?o.local?Hh:Fh:o.local?Rh:Dh)(o,r))}function To(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function Gh(i){return function(){this.style.removeProperty(i)}}function Wh(i,r,o){return function(){this.style.setProperty(i,r,o)}}function Uh(i,r,o){return function(){var a=r.apply(this,arguments);a==null?this.style.removeProperty(i):this.style.setProperty(i,a,o)}}function Vh(i,r,o){return arguments.length>1?this.each((r==null?Gh:typeof r=="function"?Uh:Wh)(i,r,o??"")):le(this.node(),i)}function le(i,r){return i.style.getPropertyValue(r)||To(i).getComputedStyle(i,null).getPropertyValue(r)}function qh(i){return function(){delete this[i]}}function Yh(i,r){return function(){this[i]=r}}function Xh(i,r){return function(){var o=r.apply(this,arguments);o==null?delete this[i]:this[i]=o}}function Kh(i,r){return arguments.length>1?this.each((r==null?qh:typeof r=="function"?Xh:Yh)(i,r)):this.node()[i]}function Mo(i){return i.trim().split(/^|\s+/)}function bn(i){return i.classList||new ko(i)}function ko(i){this._node=i,this._names=Mo(i.getAttribute("class")||"")}ko.prototype={add:function(i){var r=this._names.indexOf(i);r<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var r=this._names.indexOf(i);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};function So(i,r){for(var o=bn(i),a=-1,u=r.length;++a<u;)o.add(r[a])}function Co(i,r){for(var o=bn(i),a=-1,u=r.length;++a<u;)o.remove(r[a])}function jh(i){return function(){So(this,i)}}function Jh(i){return function(){Co(this,i)}}function Qh(i,r){return function(){(r.apply(this,arguments)?So:Co)(this,i)}}function tu(i,r){var o=Mo(i+"");if(arguments.length<2){for(var a=bn(this.node()),u=-1,c=o.length;++u<c;)if(!a.contains(o[u]))return!1;return!0}return this.each((typeof r=="function"?Qh:r?jh:Jh)(o,r))}function eu(){this.textContent=""}function iu(i){return function(){this.textContent=i}}function nu(i){return function(){var r=i.apply(this,arguments);this.textContent=r??""}}function ru(i){return arguments.length?this.each(i==null?eu:(typeof i=="function"?nu:iu)(i)):this.node().textContent}function ou(){this.innerHTML=""}function su(i){return function(){this.innerHTML=i}}function au(i){return function(){var r=i.apply(this,arguments);this.innerHTML=r??""}}function hu(i){return arguments.length?this.each(i==null?ou:(typeof i=="function"?au:su)(i)):this.node().innerHTML}function uu(){this.nextSibling&&this.parentNode.appendChild(this)}function lu(){return this.each(uu)}function cu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function fu(){return this.each(cu)}function du(i){var r=typeof i=="function"?i:wo(i);return this.select(function(){return this.appendChild(r.apply(this,arguments))})}function pu(){return null}function _u(i,r){var o=typeof i=="function"?i:wo(i),a=r==null?pu:typeof r=="function"?r:Pn(r);return this.select(function(){return this.insertBefore(o.apply(this,arguments),a.apply(this,arguments)||null)})}function mu(){var i=this.parentNode;i&&i.removeChild(this)}function gu(){return this.each(mu)}function vu(){var i=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(i,this.nextSibling):i}function yu(){var i=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(i,this.nextSibling):i}function wu(i){return this.select(i?yu:vu)}function xu(i){return arguments.length?this.property("__data__",i):this.node().__data__}function Lu(i){return function(r){i.call(this,r,this.__data__)}}function Pu(i){return i.trim().split(/^|\s+/).map(function(r){var o="",a=r.indexOf(".");return a>=0&&(o=r.slice(a+1),r=r.slice(0,a)),{type:r,name:o}})}function bu(i){return function(){var r=this.__on;if(r){for(var o=0,a=-1,u=r.length,c;o<u;++o)c=r[o],(!i.type||c.type===i.type)&&c.name===i.name?this.removeEventListener(c.type,c.listener,c.options):r[++a]=c;++a?r.length=a:delete this.__on}}}function Tu(i,r,o){return function(){var a=this.__on,u,c=Lu(r);if(a){for(var f=0,p=a.length;f<p;++f)if((u=a[f]).type===i.type&&u.name===i.name){this.removeEventListener(u.type,u.listener,u.options),this.addEventListener(u.type,u.listener=c,u.options=o),u.value=r;return}}this.addEventListener(i.type,c,o),u={type:i.type,name:i.name,value:r,listener:c,options:o},a?a.push(u):this.__on=[u]}}function Mu(i,r,o){var a=Pu(i+""),u,c=a.length,f;if(arguments.length<2){var p=this.node().__on;if(p){for(var d=0,_=p.length,y;d<_;++d)for(u=0,y=p[d];u<c;++u)if((f=a[u]).type===y.type&&f.name===y.name)return y.value}return}for(p=r?Tu:bu,u=0;u<c;++u)this.each(p(a[u],r,o));return this}function Eo(i,r,o){var a=To(i),u=a.CustomEvent;typeof u=="function"?u=new u(r,o):(u=a.document.createEvent("Event"),o?(u.initEvent(r,o.bubbles,o.cancelable),u.detail=o.detail):u.initEvent(r,!1,!1)),i.dispatchEvent(u)}function ku(i,r){return function(){return Eo(this,i,r)}}function Su(i,r){return function(){return Eo(this,i,r.apply(this,arguments))}}function Cu(i,r){return this.each((typeof r=="function"?Su:ku)(i,r))}function*Eu(){for(var i=this._groups,r=0,o=i.length;r<o;++r)for(var a=i[r],u=0,c=a.length,f;u<c;++u)(f=a[u])&&(yield f)}var Ao=[null];function gt(i,r){this._groups=i,this._parents=r}function Ne(){return new gt([[document.documentElement]],Ao)}function Au(){return this}gt.prototype=Ne.prototype={constructor:gt,select:nh,selectAll:ah,selectChild:ch,selectChildren:_h,filter:mh,data:Lh,enter:gh,exit:bh,join:Th,merge:Mh,selection:Au,order:kh,sort:Sh,call:Eh,nodes:Ah,node:Ih,size:zh,empty:Oh,each:Bh,attr:$h,style:Vh,property:Kh,classed:tu,text:ru,html:hu,raise:lu,lower:fu,append:du,insert:_u,remove:gu,clone:wu,datum:xu,on:Mu,dispatch:Cu,[Symbol.iterator]:Eu};function it(i){return typeof i=="string"?new gt([[document.querySelector(i)]],[document.documentElement]):new gt([[i]],Ao)}function Tn(i,r,o){i.prototype=r.prototype=o,o.constructor=i}function Io(i,r){var o=Object.create(i.prototype);for(var a in r)o[a]=r[a];return o}function De(){}var Oe=.7,_i=1/Oe,ue="\\s*([+-]?\\d+)\\s*",Be="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",It="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Iu=/^#([0-9a-f]{3,8})$/,zu=new RegExp(`^rgb\\(${ue},${ue},${ue}\\)$`),Ou=new RegExp(`^rgb\\(${It},${It},${It}\\)$`),Bu=new RegExp(`^rgba\\(${ue},${ue},${ue},${Be}\\)$`),Zu=new RegExp(`^rgba\\(${It},${It},${It},${Be}\\)$`),Nu=new RegExp(`^hsl\\(${Be},${It},${It}\\)$`),Du=new RegExp(`^hsla\\(${Be},${It},${It},${Be}\\)$`),qr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tn(De,jt,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:Yr,formatHex:Yr,formatHex8:Ru,formatHsl:Fu,formatRgb:Xr,toString:Xr});function Yr(){return this.rgb().formatHex()}function Ru(){return this.rgb().formatHex8()}function Fu(){return zo(this).formatHsl()}function Xr(){return this.rgb().formatRgb()}function jt(i){var r,o;return i=(i+"").trim().toLowerCase(),(r=Iu.exec(i))?(o=r[1].length,r=parseInt(r[1],16),o===6?Kr(r):o===3?new mt(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):o===8?oi(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):o===4?oi(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=zu.exec(i))?new mt(r[1],r[2],r[3],1):(r=Ou.exec(i))?new mt(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=Bu.exec(i))?oi(r[1],r[2],r[3],r[4]):(r=Zu.exec(i))?oi(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=Nu.exec(i))?Qr(r[1],r[2]/100,r[3]/100,1):(r=Du.exec(i))?Qr(r[1],r[2]/100,r[3]/100,r[4]):qr.hasOwnProperty(i)?Kr(qr[i]):i==="transparent"?new mt(NaN,NaN,NaN,0):null}function Kr(i){return new mt(i>>16&255,i>>8&255,i&255,1)}function oi(i,r,o,a){return a<=0&&(i=r=o=NaN),new mt(i,r,o,a)}function Hu(i){return i instanceof De||(i=jt(i)),i?(i=i.rgb(),new mt(i.r,i.g,i.b,i.opacity)):new mt}function mn(i,r,o,a){return arguments.length===1?Hu(i):new mt(i,r,o,a??1)}function mt(i,r,o,a){this.r=+i,this.g=+r,this.b=+o,this.opacity=+a}Tn(mt,mn,Io(De,{brighter(i){return i=i==null?_i:Math.pow(_i,i),new mt(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?Oe:Math.pow(Oe,i),new mt(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new mt(Kt(this.r),Kt(this.g),Kt(this.b),mi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jr,formatHex:jr,formatHex8:$u,formatRgb:Jr,toString:Jr}));function jr(){return`#${Xt(this.r)}${Xt(this.g)}${Xt(this.b)}`}function $u(){return`#${Xt(this.r)}${Xt(this.g)}${Xt(this.b)}${Xt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Jr(){const i=mi(this.opacity);return`${i===1?"rgb(":"rgba("}${Kt(this.r)}, ${Kt(this.g)}, ${Kt(this.b)}${i===1?")":`, ${i})`}`}function mi(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function Kt(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Xt(i){return i=Kt(i),(i<16?"0":"")+i.toString(16)}function Qr(i,r,o,a){return a<=0?i=r=o=NaN:o<=0||o>=1?i=r=NaN:r<=0&&(i=NaN),new Tt(i,r,o,a)}function zo(i){if(i instanceof Tt)return new Tt(i.h,i.s,i.l,i.opacity);if(i instanceof De||(i=jt(i)),!i)return new Tt;if(i instanceof Tt)return i;i=i.rgb();var r=i.r/255,o=i.g/255,a=i.b/255,u=Math.min(r,o,a),c=Math.max(r,o,a),f=NaN,p=c-u,d=(c+u)/2;return p?(r===c?f=(o-a)/p+(o<a)*6:o===c?f=(a-r)/p+2:f=(r-o)/p+4,p/=d<.5?c+u:2-c-u,f*=60):p=d>0&&d<1?0:f,new Tt(f,p,d,i.opacity)}function Gu(i,r,o,a){return arguments.length===1?zo(i):new Tt(i,r,o,a??1)}function Tt(i,r,o,a){this.h=+i,this.s=+r,this.l=+o,this.opacity=+a}Tn(Tt,Gu,Io(De,{brighter(i){return i=i==null?_i:Math.pow(_i,i),new Tt(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?Oe:Math.pow(Oe,i),new Tt(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,r=isNaN(i)||isNaN(this.s)?0:this.s,o=this.l,a=o+(o<.5?o:1-o)*r,u=2*o-a;return new mt(hn(i>=240?i-240:i+120,u,a),hn(i,u,a),hn(i<120?i+240:i-120,u,a),this.opacity)},clamp(){return new Tt(to(this.h),si(this.s),si(this.l),mi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=mi(this.opacity);return`${i===1?"hsl(":"hsla("}${to(this.h)}, ${si(this.s)*100}%, ${si(this.l)*100}%${i===1?")":`, ${i})`}`}}));function to(i){return i=(i||0)%360,i<0?i+360:i}function si(i){return Math.max(0,Math.min(1,i||0))}function hn(i,r,o){return(i<60?r+(o-r)*i/60:i<180?o:i<240?r+(o-r)*(240-i)/60:r)*255}const Mn=i=>()=>i;function Wu(i,r){return function(o){return i+o*r}}function Uu(i,r,o){return i=Math.pow(i,o),r=Math.pow(r,o)-i,o=1/o,function(a){return Math.pow(i+a*r,o)}}function Vu(i){return(i=+i)==1?Oo:function(r,o){return o-r?Uu(r,o,i):Mn(isNaN(r)?o:r)}}function Oo(i,r){var o=r-i;return o?Wu(i,o):Mn(isNaN(i)?r:i)}const gi=function i(r){var o=Vu(r);function a(u,c){var f=o((u=mn(u)).r,(c=mn(c)).r),p=o(u.g,c.g),d=o(u.b,c.b),_=Oo(u.opacity,c.opacity);return function(y){return u.r=f(y),u.g=p(y),u.b=d(y),u.opacity=_(y),u+""}}return a.gamma=i,a}(1);function qu(i,r){r||(r=[]);var o=i?Math.min(r.length,i.length):0,a=r.slice(),u;return function(c){for(u=0;u<o;++u)a[u]=i[u]*(1-c)+r[u]*c;return a}}function Yu(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Xu(i,r){var o=r?r.length:0,a=i?Math.min(o,i.length):0,u=new Array(a),c=new Array(o),f;for(f=0;f<a;++f)u[f]=kn(i[f],r[f]);for(;f<o;++f)c[f]=r[f];return function(p){for(f=0;f<a;++f)c[f]=u[f](p);return c}}function Ku(i,r){var o=new Date;return i=+i,r=+r,function(a){return o.setTime(i*(1-a)+r*a),o}}function bt(i,r){return i=+i,r=+r,function(o){return i*(1-o)+r*o}}function ju(i,r){var o={},a={},u;(i===null||typeof i!="object")&&(i={}),(r===null||typeof r!="object")&&(r={});for(u in r)u in i?o[u]=kn(i[u],r[u]):a[u]=r[u];return function(c){for(u in o)a[u]=o[u](c);return a}}var gn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,un=new RegExp(gn.source,"g");function Ju(i){return function(){return i}}function Qu(i){return function(r){return i(r)+""}}function Bo(i,r){var o=gn.lastIndex=un.lastIndex=0,a,u,c,f=-1,p=[],d=[];for(i=i+"",r=r+"";(a=gn.exec(i))&&(u=un.exec(r));)(c=u.index)>o&&(c=r.slice(o,c),p[f]?p[f]+=c:p[++f]=c),(a=a[0])===(u=u[0])?p[f]?p[f]+=u:p[++f]=u:(p[++f]=null,d.push({i:f,x:bt(a,u)})),o=un.lastIndex;return o<r.length&&(c=r.slice(o),p[f]?p[f]+=c:p[++f]=c),p.length<2?d[0]?Qu(d[0].x):Ju(r):(r=d.length,function(_){for(var y=0,g;y<r;++y)p[(g=d[y]).i]=g.x(_);return p.join("")})}function kn(i,r){var o=typeof r,a;return r==null||o==="boolean"?Mn(r):(o==="number"?bt:o==="string"?(a=jt(r))?(r=a,gi):Bo:r instanceof jt?gi:r instanceof Date?Ku:Yu(r)?qu:Array.isArray(r)?Xu:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?ju:bt)(i,r)}function tl(i,r){return i=+i,r=+r,function(o){return Math.round(i*(1-o)+r*o)}}var eo=180/Math.PI,vn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zo(i,r,o,a,u,c){var f,p,d;return(f=Math.sqrt(i*i+r*r))&&(i/=f,r/=f),(d=i*o+r*a)&&(o-=i*d,a-=r*d),(p=Math.sqrt(o*o+a*a))&&(o/=p,a/=p,d/=p),i*a<r*o&&(i=-i,r=-r,d=-d,f=-f),{translateX:u,translateY:c,rotate:Math.atan2(r,i)*eo,skewX:Math.atan(d)*eo,scaleX:f,scaleY:p}}var ai;function el(i){const r=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(i+"");return r.isIdentity?vn:Zo(r.a,r.b,r.c,r.d,r.e,r.f)}function il(i){return i==null||(ai||(ai=document.createElementNS("http://www.w3.org/2000/svg","g")),ai.setAttribute("transform",i),!(i=ai.transform.baseVal.consolidate()))?vn:(i=i.matrix,Zo(i.a,i.b,i.c,i.d,i.e,i.f))}function No(i,r,o,a){function u(_){return _.length?_.pop()+" ":""}function c(_,y,g,v,w,M){if(_!==g||y!==v){var T=w.push("translate(",null,r,null,o);M.push({i:T-4,x:bt(_,g)},{i:T-2,x:bt(y,v)})}else(g||v)&&w.push("translate("+g+r+v+o)}function f(_,y,g,v){_!==y?(_-y>180?y+=360:y-_>180&&(_+=360),v.push({i:g.push(u(g)+"rotate(",null,a)-2,x:bt(_,y)})):y&&g.push(u(g)+"rotate("+y+a)}function p(_,y,g,v){_!==y?v.push({i:g.push(u(g)+"skewX(",null,a)-2,x:bt(_,y)}):y&&g.push(u(g)+"skewX("+y+a)}function d(_,y,g,v,w,M){if(_!==g||y!==v){var T=w.push(u(w)+"scale(",null,",",null,")");M.push({i:T-4,x:bt(_,g)},{i:T-2,x:bt(y,v)})}else(g!==1||v!==1)&&w.push(u(w)+"scale("+g+","+v+")")}return function(_,y){var g=[],v=[];return _=i(_),y=i(y),c(_.translateX,_.translateY,y.translateX,y.translateY,g,v),f(_.rotate,y.rotate,g,v),p(_.skewX,y.skewX,g,v),d(_.scaleX,_.scaleY,y.scaleX,y.scaleY,g,v),_=y=null,function(w){for(var M=-1,T=v.length,A;++M<T;)g[(A=v[M]).i]=A.x(w);return g.join("")}}}var nl=No(el,"px, ","px)","deg)"),rl=No(il,", ",")",")"),ce=0,Ee=0,ke=0,Do=1e3,vi,Ae,yi=0,Jt=0,Ti=0,Ze=typeof performance=="object"&&performance.now?performance:Date,Ro=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function Sn(){return Jt||(Ro(ol),Jt=Ze.now()+Ti)}function ol(){Jt=0}function wi(){this._call=this._time=this._next=null}wi.prototype=Fo.prototype={constructor:wi,restart:function(i,r,o){if(typeof i!="function")throw new TypeError("callback is not a function");o=(o==null?Sn():+o)+(r==null?0:+r),!this._next&&Ae!==this&&(Ae?Ae._next=this:vi=this,Ae=this),this._call=i,this._time=o,yn()},stop:function(){this._call&&(this._call=null,this._time=1/0,yn())}};function Fo(i,r,o){var a=new wi;return a.restart(i,r,o),a}function sl(){Sn(),++ce;for(var i=vi,r;i;)(r=Jt-i._time)>=0&&i._call.call(void 0,r),i=i._next;--ce}function io(){Jt=(yi=Ze.now())+Ti,ce=Ee=0;try{sl()}finally{ce=0,hl(),Jt=0}}function al(){var i=Ze.now(),r=i-yi;r>Do&&(Ti-=r,yi=i)}function hl(){for(var i,r=vi,o,a=1/0;r;)r._call?(a>r._time&&(a=r._time),i=r,r=r._next):(o=r._next,r._next=null,r=i?i._next=o:vi=o);Ae=i,yn(a)}function yn(i){if(!ce){Ee&&(Ee=clearTimeout(Ee));var r=i-Jt;r>24?(i<1/0&&(Ee=setTimeout(io,i-Ze.now()-Ti)),ke&&(ke=clearInterval(ke))):(ke||(yi=Ze.now(),ke=setInterval(al,Do)),ce=1,Ro(io))}}function no(i,r,o){var a=new wi;return r=r==null?0:+r,a.restart(u=>{a.stop(),i(u+r)},r,o),a}var ul=yo("start","end","cancel","interrupt"),ll=[],Ho=0,ro=1,wn=2,ci=3,oo=4,xn=5,fi=6;function Mi(i,r,o,a,u,c){var f=i.__transition;if(!f)i.__transition={};else if(o in f)return;cl(i,o,{name:r,index:a,group:u,on:ul,tween:ll,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:Ho})}function Cn(i,r){var o=Mt(i,r);if(o.state>Ho)throw new Error("too late; already scheduled");return o}function zt(i,r){var o=Mt(i,r);if(o.state>ci)throw new Error("too late; already running");return o}function Mt(i,r){var o=i.__transition;if(!o||!(o=o[r]))throw new Error("transition not found");return o}function cl(i,r,o){var a=i.__transition,u;a[r]=o,o.timer=Fo(c,0,o.time);function c(_){o.state=ro,o.timer.restart(f,o.delay,o.time),o.delay<=_&&f(_-o.delay)}function f(_){var y,g,v,w;if(o.state!==ro)return d();for(y in a)if(w=a[y],w.name===o.name){if(w.state===ci)return no(f);w.state===oo?(w.state=fi,w.timer.stop(),w.on.call("interrupt",i,i.__data__,w.index,w.group),delete a[y]):+y<r&&(w.state=fi,w.timer.stop(),w.on.call("cancel",i,i.__data__,w.index,w.group),delete a[y])}if(no(function(){o.state===ci&&(o.state=oo,o.timer.restart(p,o.delay,o.time),p(_))}),o.state=wn,o.on.call("start",i,i.__data__,o.index,o.group),o.state===wn){for(o.state=ci,u=new Array(v=o.tween.length),y=0,g=-1;y<v;++y)(w=o.tween[y].value.call(i,i.__data__,o.index,o.group))&&(u[++g]=w);u.length=g+1}}function p(_){for(var y=_<o.duration?o.ease.call(null,_/o.duration):(o.timer.restart(d),o.state=xn,1),g=-1,v=u.length;++g<v;)u[g].call(i,y);o.state===xn&&(o.on.call("end",i,i.__data__,o.index,o.group),d())}function d(){o.state=fi,o.timer.stop(),delete a[r];for(var _ in a)return;delete i.__transition}}function fl(i,r){var o=i.__transition,a,u,c=!0,f;if(o){r=r==null?null:r+"";for(f in o){if((a=o[f]).name!==r){c=!1;continue}u=a.state>wn&&a.state<xn,a.state=fi,a.timer.stop(),a.on.call(u?"interrupt":"cancel",i,i.__data__,a.index,a.group),delete o[f]}c&&delete i.__transition}}function dl(i){return this.each(function(){fl(this,i)})}function pl(i,r){var o,a;return function(){var u=zt(this,i),c=u.tween;if(c!==o){a=o=c;for(var f=0,p=a.length;f<p;++f)if(a[f].name===r){a=a.slice(),a.splice(f,1);break}}u.tween=a}}function _l(i,r,o){var a,u;if(typeof o!="function")throw new Error;return function(){var c=zt(this,i),f=c.tween;if(f!==a){u=(a=f).slice();for(var p={name:r,value:o},d=0,_=u.length;d<_;++d)if(u[d].name===r){u[d]=p;break}d===_&&u.push(p)}c.tween=u}}function ml(i,r){var o=this._id;if(i+="",arguments.length<2){for(var a=Mt(this.node(),o).tween,u=0,c=a.length,f;u<c;++u)if((f=a[u]).name===i)return f.value;return null}return this.each((r==null?pl:_l)(o,i,r))}function En(i,r,o){var a=i._id;return i.each(function(){var u=zt(this,a);(u.value||(u.value={}))[r]=o.apply(this,arguments)}),function(u){return Mt(u,a).value[r]}}function $o(i,r){var o;return(typeof r=="number"?bt:r instanceof jt?gi:(o=jt(r))?(r=o,gi):Bo)(i,r)}function gl(i){return function(){this.removeAttribute(i)}}function vl(i){return function(){this.removeAttributeNS(i.space,i.local)}}function yl(i,r,o){var a,u=o+"",c;return function(){var f=this.getAttribute(i);return f===u?null:f===a?c:c=r(a=f,o)}}function wl(i,r,o){var a,u=o+"",c;return function(){var f=this.getAttributeNS(i.space,i.local);return f===u?null:f===a?c:c=r(a=f,o)}}function xl(i,r,o){var a,u,c;return function(){var f,p=o(this),d;return p==null?void this.removeAttribute(i):(f=this.getAttribute(i),d=p+"",f===d?null:f===a&&d===u?c:(u=d,c=r(a=f,p)))}}function Ll(i,r,o){var a,u,c;return function(){var f,p=o(this),d;return p==null?void this.removeAttributeNS(i.space,i.local):(f=this.getAttributeNS(i.space,i.local),d=p+"",f===d?null:f===a&&d===u?c:(u=d,c=r(a=f,p)))}}function Pl(i,r){var o=bi(i),a=o==="transform"?rl:$o;return this.attrTween(i,typeof r=="function"?(o.local?Ll:xl)(o,a,En(this,"attr."+i,r)):r==null?(o.local?vl:gl)(o):(o.local?wl:yl)(o,a,r))}function bl(i,r){return function(o){this.setAttribute(i,r.call(this,o))}}function Tl(i,r){return function(o){this.setAttributeNS(i.space,i.local,r.call(this,o))}}function Ml(i,r){var o,a;function u(){var c=r.apply(this,arguments);return c!==a&&(o=(a=c)&&Tl(i,c)),o}return u._value=r,u}function kl(i,r){var o,a;function u(){var c=r.apply(this,arguments);return c!==a&&(o=(a=c)&&bl(i,c)),o}return u._value=r,u}function Sl(i,r){var o="attr."+i;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(r==null)return this.tween(o,null);if(typeof r!="function")throw new Error;var a=bi(i);return this.tween(o,(a.local?Ml:kl)(a,r))}function Cl(i,r){return function(){Cn(this,i).delay=+r.apply(this,arguments)}}function El(i,r){return r=+r,function(){Cn(this,i).delay=r}}function Al(i){var r=this._id;return arguments.length?this.each((typeof i=="function"?Cl:El)(r,i)):Mt(this.node(),r).delay}function Il(i,r){return function(){zt(this,i).duration=+r.apply(this,arguments)}}function zl(i,r){return r=+r,function(){zt(this,i).duration=r}}function Ol(i){var r=this._id;return arguments.length?this.each((typeof i=="function"?Il:zl)(r,i)):Mt(this.node(),r).duration}function Bl(i,r){if(typeof r!="function")throw new Error;return function(){zt(this,i).ease=r}}function Zl(i){var r=this._id;return arguments.length?this.each(Bl(r,i)):Mt(this.node(),r).ease}function Nl(i,r){return function(){var o=r.apply(this,arguments);if(typeof o!="function")throw new Error;zt(this,i).ease=o}}function Dl(i){if(typeof i!="function")throw new Error;return this.each(Nl(this._id,i))}function Rl(i){typeof i!="function"&&(i=Lo(i));for(var r=this._groups,o=r.length,a=new Array(o),u=0;u<o;++u)for(var c=r[u],f=c.length,p=a[u]=[],d,_=0;_<f;++_)(d=c[_])&&i.call(d,d.__data__,_,c)&&p.push(d);return new Ft(a,this._parents,this._name,this._id)}function Fl(i){if(i._id!==this._id)throw new Error;for(var r=this._groups,o=i._groups,a=r.length,u=o.length,c=Math.min(a,u),f=new Array(a),p=0;p<c;++p)for(var d=r[p],_=o[p],y=d.length,g=f[p]=new Array(y),v,w=0;w<y;++w)(v=d[w]||_[w])&&(g[w]=v);for(;p<a;++p)f[p]=r[p];return new Ft(f,this._parents,this._name,this._id)}function Hl(i){return(i+"").trim().split(/^|\s+/).every(function(r){var o=r.indexOf(".");return o>=0&&(r=r.slice(0,o)),!r||r==="start"})}function $l(i,r,o){var a,u,c=Hl(r)?Cn:zt;return function(){var f=c(this,i),p=f.on;p!==a&&(u=(a=p).copy()).on(r,o),f.on=u}}function Gl(i,r){var o=this._id;return arguments.length<2?Mt(this.node(),o).on.on(i):this.each($l(o,i,r))}function Wl(i){return function(){var r=this.parentNode;for(var o in this.__transition)if(+o!==i)return;r&&r.removeChild(this)}}function Ul(){return this.on("end.remove",Wl(this._id))}function Vl(i){var r=this._name,o=this._id;typeof i!="function"&&(i=Pn(i));for(var a=this._groups,u=a.length,c=new Array(u),f=0;f<u;++f)for(var p=a[f],d=p.length,_=c[f]=new Array(d),y,g,v=0;v<d;++v)(y=p[v])&&(g=i.call(y,y.__data__,v,p))&&("__data__"in y&&(g.__data__=y.__data__),_[v]=g,Mi(_[v],r,o,v,_,Mt(y,o)));return new Ft(c,this._parents,r,o)}function ql(i){var r=this._name,o=this._id;typeof i!="function"&&(i=xo(i));for(var a=this._groups,u=a.length,c=[],f=[],p=0;p<u;++p)for(var d=a[p],_=d.length,y,g=0;g<_;++g)if(y=d[g]){for(var v=i.call(y,y.__data__,g,d),w,M=Mt(y,o),T=0,A=v.length;T<A;++T)(w=v[T])&&Mi(w,r,o,T,v,M);c.push(v),f.push(y)}return new Ft(c,f,r,o)}var Yl=Ne.prototype.constructor;function Xl(){return new Yl(this._groups,this._parents)}function Kl(i,r){var o,a,u;return function(){var c=le(this,i),f=(this.style.removeProperty(i),le(this,i));return c===f?null:c===o&&f===a?u:u=r(o=c,a=f)}}function Go(i){return function(){this.style.removeProperty(i)}}function jl(i,r,o){var a,u=o+"",c;return function(){var f=le(this,i);return f===u?null:f===a?c:c=r(a=f,o)}}function Jl(i,r,o){var a,u,c;return function(){var f=le(this,i),p=o(this),d=p+"";return p==null&&(d=p=(this.style.removeProperty(i),le(this,i))),f===d?null:f===a&&d===u?c:(u=d,c=r(a=f,p))}}function Ql(i,r){var o,a,u,c="style."+r,f="end."+c,p;return function(){var d=zt(this,i),_=d.on,y=d.value[c]==null?p||(p=Go(r)):void 0;(_!==o||u!==y)&&(a=(o=_).copy()).on(f,u=y),d.on=a}}function tc(i,r,o){var a=(i+="")=="transform"?nl:$o;return r==null?this.styleTween(i,Kl(i,a)).on("end.style."+i,Go(i)):typeof r=="function"?this.styleTween(i,Jl(i,a,En(this,"style."+i,r))).each(Ql(this._id,i)):this.styleTween(i,jl(i,a,r),o).on("end.style."+i,null)}function ec(i,r,o){return function(a){this.style.setProperty(i,r.call(this,a),o)}}function ic(i,r,o){var a,u;function c(){var f=r.apply(this,arguments);return f!==u&&(a=(u=f)&&ec(i,f,o)),a}return c._value=r,c}function nc(i,r,o){var a="style."+(i+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(r==null)return this.tween(a,null);if(typeof r!="function")throw new Error;return this.tween(a,ic(i,r,o??""))}function rc(i){return function(){this.textContent=i}}function oc(i){return function(){var r=i(this);this.textContent=r??""}}function sc(i){return this.tween("text",typeof i=="function"?oc(En(this,"text",i)):rc(i==null?"":i+""))}function ac(i){return function(r){this.textContent=i.call(this,r)}}function hc(i){var r,o;function a(){var u=i.apply(this,arguments);return u!==o&&(r=(o=u)&&ac(u)),r}return a._value=i,a}function uc(i){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(i==null)return this.tween(r,null);if(typeof i!="function")throw new Error;return this.tween(r,hc(i))}function lc(){for(var i=this._name,r=this._id,o=Wo(),a=this._groups,u=a.length,c=0;c<u;++c)for(var f=a[c],p=f.length,d,_=0;_<p;++_)if(d=f[_]){var y=Mt(d,r);Mi(d,i,o,_,f,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new Ft(a,this._parents,i,o)}function cc(){var i,r,o=this,a=o._id,u=o.size();return new Promise(function(c,f){var p={value:f},d={value:function(){--u===0&&c()}};o.each(function(){var _=zt(this,a),y=_.on;y!==i&&(r=(i=y).copy(),r._.cancel.push(p),r._.interrupt.push(p),r._.end.push(d)),_.on=r}),u===0&&c()})}var fc=0;function Ft(i,r,o,a){this._groups=i,this._parents=r,this._name=o,this._id=a}function Wo(){return++fc}var Rt=Ne.prototype;Ft.prototype={constructor:Ft,select:Vl,selectAll:ql,selectChild:Rt.selectChild,selectChildren:Rt.selectChildren,filter:Rl,merge:Fl,selection:Xl,transition:lc,call:Rt.call,nodes:Rt.nodes,node:Rt.node,size:Rt.size,empty:Rt.empty,each:Rt.each,on:Gl,attr:Pl,attrTween:Sl,style:tc,styleTween:nc,text:sc,textTween:uc,remove:Ul,tween:ml,delay:Al,duration:Ol,ease:Zl,easeVarying:Dl,end:cc,[Symbol.iterator]:Rt[Symbol.iterator]};function dc(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var pc={time:null,delay:0,duration:250,ease:dc};function _c(i,r){for(var o;!(o=i.__transition)||!(o=o[r]);)if(!(i=i.parentNode))throw new Error(`transition ${r} not found`);return o}function mc(i){var r,o;i instanceof Ft?(r=i._id,i=i._name):(r=Wo(),(o=pc).time=Sn(),i=i==null?null:i+"");for(var a=this._groups,u=a.length,c=0;c<u;++c)for(var f=a[c],p=f.length,d,_=0;_<p;++_)(d=f[_])&&Mi(d,i,r,_,f,o||_c(d,r));return new Ft(a,this._parents,i,r)}Ne.prototype.interrupt=dl;Ne.prototype.transition=mc;var so={},ln={},cn=34,Se=10,fn=13;function Uo(i){return new Function("d","return {"+i.map(function(r,o){return JSON.stringify(r)+": d["+o+'] || ""'}).join(",")+"}")}function gc(i,r){var o=Uo(i);return function(a,u){return r(o(a),u,i)}}function ao(i){var r=Object.create(null),o=[];return i.forEach(function(a){for(var u in a)u in r||o.push(r[u]=u)}),o}function _t(i,r){var o=i+"",a=o.length;return a<r?new Array(r-a+1).join(0)+o:o}function vc(i){return i<0?"-"+_t(-i,6):i>9999?"+"+_t(i,6):_t(i,4)}function yc(i){var r=i.getUTCHours(),o=i.getUTCMinutes(),a=i.getUTCSeconds(),u=i.getUTCMilliseconds();return isNaN(i)?"Invalid Date":vc(i.getUTCFullYear())+"-"+_t(i.getUTCMonth()+1,2)+"-"+_t(i.getUTCDate(),2)+(u?"T"+_t(r,2)+":"+_t(o,2)+":"+_t(a,2)+"."+_t(u,3)+"Z":a?"T"+_t(r,2)+":"+_t(o,2)+":"+_t(a,2)+"Z":o||r?"T"+_t(r,2)+":"+_t(o,2)+"Z":"")}function wc(i){var r=new RegExp('["'+i+`
\r]`),o=i.charCodeAt(0);function a(g,v){var w,M,T=u(g,function(A,D){if(w)return w(A,D-1);M=A,w=v?gc(A,v):Uo(A)});return T.columns=M||[],T}function u(g,v){var w=[],M=g.length,T=0,A=0,D,U=M<=0,B=!1;g.charCodeAt(M-1)===Se&&--M,g.charCodeAt(M-1)===fn&&--M;function Q(){if(U)return ln;if(B)return B=!1,so;var X,G=T,F;if(g.charCodeAt(G)===cn){for(;T++<M&&g.charCodeAt(T)!==cn||g.charCodeAt(++T)===cn;);return(X=T)>=M?U=!0:(F=g.charCodeAt(T++))===Se?B=!0:F===fn&&(B=!0,g.charCodeAt(T)===Se&&++T),g.slice(G+1,X-1).replace(/""/g,'"')}for(;T<M;){if((F=g.charCodeAt(X=T++))===Se)B=!0;else if(F===fn)B=!0,g.charCodeAt(T)===Se&&++T;else if(F!==o)continue;return g.slice(G,X)}return U=!0,g.slice(G,M)}for(;(D=Q())!==ln;){for(var k=[];D!==so&&D!==ln;)k.push(D),D=Q();v&&(k=v(k,A++))==null||w.push(k)}return w}function c(g,v){return g.map(function(w){return v.map(function(M){return y(w[M])}).join(i)})}function f(g,v){return v==null&&(v=ao(g)),[v.map(y).join(i)].concat(c(g,v)).join(`
`)}function p(g,v){return v==null&&(v=ao(g)),c(g,v).join(`
`)}function d(g){return g.map(_).join(`
`)}function _(g){return g.map(y).join(i)}function y(g){return g==null?"":g instanceof Date?yc(g):r.test(g+="")?'"'+g.replace(/"/g,'""')+'"':g}return{parse:a,parseRows:u,format:f,formatBody:p,formatRows:d,formatRow:_,formatValue:y}}var xc=wc(","),Lc=xc.parse;function Pc(i){if(!i.ok)throw new Error(i.status+" "+i.statusText);return i.text()}function bc(i,r){return fetch(i,r).then(Pc)}function Tc(i){return function(r,o,a){return arguments.length===2&&typeof o=="function"&&(a=o,o=void 0),bc(r,o).then(function(u){return i(u,a)})}}var ho=Tc(Lc);function Mc(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function xi(i,r){if((o=(i=r?i.toExponential(r-1):i.toExponential()).indexOf("e"))<0)return null;var o,a=i.slice(0,o);return[a.length>1?a[0]+a.slice(2):a,+i.slice(o+1)]}function fe(i){return i=xi(Math.abs(i)),i?i[1]:NaN}function kc(i,r){return function(o,a){for(var u=o.length,c=[],f=0,p=i[0],d=0;u>0&&p>0&&(d+p+1>a&&(p=Math.max(1,a-d)),c.push(o.substring(u-=p,u+p)),!((d+=p+1)>a));)p=i[f=(f+1)%i.length];return c.reverse().join(r)}}function Sc(i){return function(r){return r.replace(/[0-9]/g,function(o){return i[+o]})}}var Cc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Li(i){if(!(r=Cc.exec(i)))throw new Error("invalid format: "+i);var r;return new An({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}Li.prototype=An.prototype;function An(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}An.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ec(i){t:for(var r=i.length,o=1,a=-1,u;o<r;++o)switch(i[o]){case".":a=u=o;break;case"0":a===0&&(a=o),u=o;break;default:if(!+i[o])break t;a>0&&(a=0);break}return a>0?i.slice(0,a)+i.slice(u+1):i}var Vo;function Ac(i,r){var o=xi(i,r);if(!o)return i+"";var a=o[0],u=o[1],c=u-(Vo=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,f=a.length;return c===f?a:c>f?a+new Array(c-f+1).join("0"):c>0?a.slice(0,c)+"."+a.slice(c):"0."+new Array(1-c).join("0")+xi(i,Math.max(0,r+c-1))[0]}function uo(i,r){var o=xi(i,r);if(!o)return i+"";var a=o[0],u=o[1];return u<0?"0."+new Array(-u).join("0")+a:a.length>u+1?a.slice(0,u+1)+"."+a.slice(u+1):a+new Array(u-a.length+2).join("0")}const lo={"%":(i,r)=>(i*100).toFixed(r),b:i=>Math.round(i).toString(2),c:i=>i+"",d:Mc,e:(i,r)=>i.toExponential(r),f:(i,r)=>i.toFixed(r),g:(i,r)=>i.toPrecision(r),o:i=>Math.round(i).toString(8),p:(i,r)=>uo(i*100,r),r:uo,s:Ac,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function co(i){return i}var fo=Array.prototype.map,po=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ic(i){var r=i.grouping===void 0||i.thousands===void 0?co:kc(fo.call(i.grouping,Number),i.thousands+""),o=i.currency===void 0?"":i.currency[0]+"",a=i.currency===void 0?"":i.currency[1]+"",u=i.decimal===void 0?".":i.decimal+"",c=i.numerals===void 0?co:Sc(fo.call(i.numerals,String)),f=i.percent===void 0?"%":i.percent+"",p=i.minus===void 0?"−":i.minus+"",d=i.nan===void 0?"NaN":i.nan+"";function _(g){g=Li(g);var v=g.fill,w=g.align,M=g.sign,T=g.symbol,A=g.zero,D=g.width,U=g.comma,B=g.precision,Q=g.trim,k=g.type;k==="n"?(U=!0,k="g"):lo[k]||(B===void 0&&(B=12),Q=!0,k="g"),(A||v==="0"&&w==="=")&&(A=!0,v="0",w="=");var X=T==="$"?o:T==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",G=T==="$"?a:/[%p]/.test(k)?f:"",F=lo[k],V=/[defgprs%]/.test(k);B=B===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,B)):Math.max(0,Math.min(20,B));function tt(C){var q=X,st=G,lt,Re,at;if(k==="c")st=F(C)+st,C="";else{C=+C;var kt=C<0||1/C<0;if(C=isNaN(C)?d:F(Math.abs(C),B),Q&&(C=Ec(C)),kt&&+C==0&&M!=="+"&&(kt=!1),q=(kt?M==="("?M:p:M==="-"||M==="("?"":M)+q,st=(k==="s"?po[8+Vo/3]:"")+st+(kt&&M==="("?")":""),V){for(lt=-1,Re=C.length;++lt<Re;)if(at=C.charCodeAt(lt),48>at||at>57){st=(at===46?u+C.slice(lt+1):C.slice(lt))+st,C=C.slice(0,lt);break}}}U&&!A&&(C=r(C,1/0));var z=q.length+C.length+st.length,vt=z<D?new Array(D-z+1).join(v):"";switch(U&&A&&(C=r(vt+C,vt.length?D-st.length:1/0),vt=""),w){case"<":C=q+C+st+vt;break;case"=":C=q+vt+C+st;break;case"^":C=vt.slice(0,z=vt.length>>1)+q+C+st+vt.slice(z);break;default:C=vt+q+C+st;break}return c(C)}return tt.toString=function(){return g+""},tt}function y(g,v){var w=_((g=Li(g),g.type="f",g)),M=Math.max(-8,Math.min(8,Math.floor(fe(v)/3)))*3,T=Math.pow(10,-M),A=po[8+M/3];return function(D){return w(T*D)+A}}return{format:_,formatPrefix:y}}var hi,qo,Yo;zc({thousands:",",grouping:[3],currency:["$",""]});function zc(i){return hi=Ic(i),qo=hi.format,Yo=hi.formatPrefix,hi}function Oc(i){return Math.max(0,-fe(Math.abs(i)))}function Bc(i,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(fe(r)/3)))*3-fe(Math.abs(i)))}function Zc(i,r){return i=Math.abs(i),r=Math.abs(r)-i,Math.max(0,fe(r)-fe(i))+1}function In(i,r){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(r).domain(i);break}return this}const _o=Symbol("implicit");function Xo(){var i=new dn,r=[],o=[],a=_o;function u(c){let f=i.get(c);if(f===void 0){if(a!==_o)return a;i.set(c,f=r.push(c)-1)}return o[f%o.length]}return u.domain=function(c){if(!arguments.length)return r.slice();r=[],i=new dn;for(const f of c)i.has(f)||i.set(f,r.push(f)-1);return u},u.range=function(c){return arguments.length?(o=Array.from(c),u):o.slice()},u.unknown=function(c){return arguments.length?(a=c,u):a},u.copy=function(){return Xo(r,o).unknown(a)},In.apply(u,arguments),u}function Ko(){var i=Xo().unknown(void 0),r=i.domain,o=i.range,a=0,u=1,c,f,p=!1,d=0,_=0,y=.5;delete i.unknown;function g(){var v=r().length,w=u<a,M=w?u:a,T=w?a:u;c=(T-M)/Math.max(1,v-d+_*2),p&&(c=Math.floor(c)),M+=(T-M-c*(v-d))*y,f=c*(1-d),p&&(M=Math.round(M),f=Math.round(f));var A=$a(v).map(function(D){return M+c*D});return o(w?A.reverse():A)}return i.domain=function(v){return arguments.length?(r(v),g()):r()},i.range=function(v){return arguments.length?([a,u]=v,a=+a,u=+u,g()):[a,u]},i.rangeRound=function(v){return[a,u]=v,a=+a,u=+u,p=!0,g()},i.bandwidth=function(){return f},i.step=function(){return c},i.round=function(v){return arguments.length?(p=!!v,g()):p},i.padding=function(v){return arguments.length?(d=Math.min(1,_=+v),g()):d},i.paddingInner=function(v){return arguments.length?(d=Math.min(1,v),g()):d},i.paddingOuter=function(v){return arguments.length?(_=+v,g()):_},i.align=function(v){return arguments.length?(y=Math.max(0,Math.min(1,v)),g()):y},i.copy=function(){return Ko(r(),[a,u]).round(p).paddingInner(d).paddingOuter(_).align(y)},In.apply(g(),arguments)}function Nc(i){return function(){return i}}function Dc(i){return+i}var mo=[0,1];function he(i){return i}function Ln(i,r){return(r-=i=+i)?function(o){return(o-i)/r}:Nc(isNaN(r)?NaN:.5)}function Rc(i,r){var o;return i>r&&(o=i,i=r,r=o),function(a){return Math.max(i,Math.min(r,a))}}function Fc(i,r,o){var a=i[0],u=i[1],c=r[0],f=r[1];return u<a?(a=Ln(u,a),c=o(f,c)):(a=Ln(a,u),c=o(c,f)),function(p){return c(a(p))}}function Hc(i,r,o){var a=Math.min(i.length,r.length)-1,u=new Array(a),c=new Array(a),f=-1;for(i[a]<i[0]&&(i=i.slice().reverse(),r=r.slice().reverse());++f<a;)u[f]=Ln(i[f],i[f+1]),c[f]=o(r[f],r[f+1]);return function(p){var d=Ca(i,p,1,a)-1;return c[d](u[d](p))}}function $c(i,r){return r.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function Gc(){var i=mo,r=mo,o=kn,a,u,c,f=he,p,d,_;function y(){var v=Math.min(i.length,r.length);return f!==he&&(f=Rc(i[0],i[v-1])),p=v>2?Hc:Fc,d=_=null,g}function g(v){return v==null||isNaN(v=+v)?c:(d||(d=p(i.map(a),r,o)))(a(f(v)))}return g.invert=function(v){return f(u((_||(_=p(r,i.map(a),bt)))(v)))},g.domain=function(v){return arguments.length?(i=Array.from(v,Dc),y()):i.slice()},g.range=function(v){return arguments.length?(r=Array.from(v),y()):r.slice()},g.rangeRound=function(v){return r=Array.from(v),o=tl,y()},g.clamp=function(v){return arguments.length?(f=v?!0:he,y()):f!==he},g.interpolate=function(v){return arguments.length?(o=v,y()):o},g.unknown=function(v){return arguments.length?(c=v,g):c},function(v,w){return a=v,u=w,y()}}function Wc(){return Gc()(he,he)}function Uc(i,r,o,a){var u=Fa(i,r,o),c;switch(a=Li(a??",f"),a.type){case"s":{var f=Math.max(Math.abs(i),Math.abs(r));return a.precision==null&&!isNaN(c=Bc(u,f))&&(a.precision=c),Yo(a,f)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(c=Zc(u,Math.max(Math.abs(i),Math.abs(r))))&&(a.precision=c-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(c=Oc(u))&&(a.precision=c-(a.type==="%")*2);break}}return qo(a)}function Vc(i){var r=i.domain;return i.ticks=function(o){var a=r();return Ra(a[0],a[a.length-1],o??10)},i.tickFormat=function(o,a){var u=r();return Uc(u[0],u[u.length-1],o??10,a)},i.nice=function(o){o==null&&(o=10);var a=r(),u=0,c=a.length-1,f=a[u],p=a[c],d,_,y=10;for(p<f&&(_=f,f=p,p=_,_=u,u=c,c=_);y-- >0;){if(_=pn(f,p,o),_===d)return a[u]=f,a[c]=p,r(a);if(_>0)f=Math.floor(f/_)*_,p=Math.ceil(p/_)*_;else if(_<0)f=Math.ceil(f*_)/_,p=Math.floor(p*_)/_;else break;d=_}return i},i}function jo(){var i=Wc();return i.copy=function(){return $c(i,jo())},In.apply(i,arguments),Vc(i)}function Ie(i,r,o){this.k=i,this.x=r,this.y=o}Ie.prototype={constructor:Ie,scale:function(i){return i===1?this:new Ie(this.k*i,this.x,this.y)},translate:function(i,r){return i===0&r===0?this:new Ie(this.k,this.x+this.k*i,this.y+this.k*r)},apply:function(i){return[i[0]*this.k+this.x,i[1]*this.k+this.y]},applyX:function(i){return i*this.k+this.x},applyY:function(i){return i*this.k+this.y},invert:function(i){return[(i[0]-this.x)/this.k,(i[1]-this.y)/this.k]},invertX:function(i){return(i-this.x)/this.k},invertY:function(i){return(i-this.y)/this.k},rescaleX:function(i){return i.copy().domain(i.range().map(this.invertX,this).map(i.invert,i))},rescaleY:function(i){return i.copy().domain(i.range().map(this.invertY,this).map(i.invert,i))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ie.prototype;class qc{_games=[];_currentYearRange=[2006,2025];_onBarClick=null;set games(r){this._games=r}set onBarClick(r){this._onBarClick=r}show(r){const o=r.clientWidth,a=r.clientHeight,u=it(r);u.selectAll("*").remove();const c=u.append("svg").attr("id","timeline-chart-svg").attr("width",o).attr("height",a);this.updateChart(c,o,a)}nextYear(){this._currentYearRange=[this._currentYearRange[0]+1,this._currentYearRange[1]+1],this.updateChart(it("#timeline-chart-svg"),parseFloat(it("#timeline-chart-svg").attr("width")),parseFloat(it("#timeline-chart-svg").attr("height")))}previousYear(){this._currentYearRange=[this._currentYearRange[0]-1,this._currentYearRange[1]-1],this.updateChart(it("#timeline-chart-svg"),parseFloat(it("#timeline-chart-svg").attr("width")),parseFloat(it("#timeline-chart-svg").attr("height")))}updateChart(r,o,a){const{_games:u,_currentYearRange:c}=this,f=Oa(u,v=>v.length,v=>v.year),p=Array.from(f.keys()).filter(v=>v>=c[0]&&v<=c[1]).sort((v,w)=>v-w),d=Ko().domain(p.map(v=>v.toString())).range([50,o-50]).padding(.1),_=jo().domain([0,Ha(Array.from(f.values()))]).nice().range([a-50,50]);r.selectAll("*").remove(),r.append("g").attr("transform",`translate(0,${a-50})`).call(Ka(d)).selectAll("text").style("cursor","pointer").on("click",(v,w)=>{const M=parseInt(w.toString());if(this._onBarClick){console.log("clicked",M);const T=this._games.filter(A=>A.year===M);console.log(T),this._onBarClick(T,M)}}).on("mouseover",function(v,w){it(this).attr("fill","red")}).on("mouseout",function(v,w){it(this).attr("fill","black")}).append("title").text(v=>`In diesem Jahr wurden ${f.get(parseInt(v.toString()))} Spiele veröffentlicht`),r.selectAll(".bar").data(p).enter().append("rect").attr("class","bar").attr("x",v=>d(v.toString())+d.bandwidth()/4).attr("y",v=>_(f.get(v))).attr("width",d.bandwidth()*.5).attr("height",v=>a-50-_(f.get(v))).attr("fill","blue").style("cursor","pointer").on("mouseover",function(v,w){it(this).attr("fill","red")}).on("mouseout",function(v,w){it(this).attr("fill","blue")}).on("click",(v,w)=>{if(this._onBarClick){const M=this._games.filter(T=>T.year===w);this._onBarClick(M,w)}}).append("title").text(v=>`In diesem Jahr wurden ${f.get(v)} Spiele veröffentlicht`)}}var ze={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Yc=ze.exports,go;function Xc(){return go||(go=1,function(i,r){(function(o,a){a(r)})(Yc,function(o){var a="1.9.4";function u(t){var e,n,s,h;for(n=1,s=arguments.length;n<s;n++){h=arguments[n];for(e in h)t[e]=h[e]}return t}var c=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function f(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var s=n.call(arguments,2);return function(){return t.apply(e,s.length?s.concat(n.call(arguments)):arguments)}}var p=0;function d(t){return"_leaflet_id"in t||(t._leaflet_id=++p),t._leaflet_id}function _(t,e,n){var s,h,l,m;return m=function(){s=!1,h&&(l.apply(n,h),h=!1)},l=function(){s?h=arguments:(t.apply(n,arguments),setTimeout(m,e),s=!0)},l}function y(t,e,n){var s=e[1],h=e[0],l=s-h;return t===s&&n?t:((t-h)%l+l)%l+h}function g(){return!1}function v(t,e){if(e===!1)return t;var n=Math.pow(10,e===void 0?6:e);return Math.round(t*n)/n}function w(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function M(t){return w(t).split(/\s+/)}function T(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?c(t.options):{});for(var n in e)t.options[n]=e[n];return t.options}function A(t,e,n){var s=[];for(var h in t)s.push(encodeURIComponent(n?h.toUpperCase():h)+"="+encodeURIComponent(t[h]));return(!e||e.indexOf("?")===-1?"?":"&")+s.join("&")}var D=/\{ *([\w_ -]+) *\}/g;function U(t,e){return t.replace(D,function(n,s){var h=e[s];if(h===void 0)throw new Error("No value provided for variable "+n);return typeof h=="function"&&(h=h(e)),h})}var B=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function Q(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function X(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var G=0;function F(t){var e=+new Date,n=Math.max(0,16-(e-G));return G=e+n,window.setTimeout(t,n)}var V=window.requestAnimationFrame||X("RequestAnimationFrame")||F,tt=window.cancelAnimationFrame||X("CancelAnimationFrame")||X("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function C(t,e,n){if(n&&V===F)t.call(e);else return V.call(window,f(t,e))}function q(t){t&&tt.call(window,t)}var st={__proto__:null,extend:u,create:c,bind:f,get lastId(){return p},stamp:d,throttle:_,wrapNum:y,falseFn:g,formatNum:v,trim:w,splitWords:M,setOptions:T,getParamString:A,template:U,isArray:B,indexOf:Q,emptyImageUrl:k,requestFn:V,cancelFn:tt,requestAnimFrame:C,cancelAnimFrame:q};function lt(){}lt.extend=function(t){var e=function(){T(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,s=c(n);s.constructor=e,e.prototype=s;for(var h in this)Object.prototype.hasOwnProperty.call(this,h)&&h!=="prototype"&&h!=="__super__"&&(e[h]=this[h]);return t.statics&&u(e,t.statics),t.includes&&(Re(t.includes),u.apply(null,[s].concat(t.includes))),u(s,t),delete s.statics,delete s.includes,s.options&&(s.options=n.options?c(n.options):{},u(s.options,t.options)),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var l=0,m=s._initHooks.length;l<m;l++)s._initHooks[l].call(this)}},e},lt.include=function(t){var e=this.prototype.options;return u(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},lt.mergeOptions=function(t){return u(this.prototype.options,t),this},lt.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};function Re(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=B(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var at={on:function(t,e,n){if(typeof t=="object")for(var s in t)this._on(s,t[s],e);else{t=M(t);for(var h=0,l=t.length;h<l;h++)this._on(t[h],e,n)}return this},off:function(t,e,n){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var s in t)this._off(s,t[s],e);else{t=M(t);for(var h=arguments.length===1,l=0,m=t.length;l<m;l++)h?this._off(t[l]):this._off(t[l],e,n)}return this},_on:function(t,e,n,s){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,n)===!1){n===this&&(n=void 0);var h={fn:e,ctx:n};s&&(h.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(h)}},_off:function(t,e,n){var s,h,l;if(this._events&&(s=this._events[t],!!s)){if(arguments.length===1){if(this._firingCount)for(h=0,l=s.length;h<l;h++)s[h].fn=g;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var m=this._listens(t,e,n);if(m!==!1){var x=s[m];this._firingCount&&(x.fn=g,this._events[t]=s=s.slice()),s.splice(m,1)}}},fire:function(t,e,n){if(!this.listens(t,n))return this;var s=u({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var h=this._events[t];if(h){this._firingCount=this._firingCount+1||1;for(var l=0,m=h.length;l<m;l++){var x=h[l],P=x.fn;x.once&&this.off(t,P,x.ctx),P.call(x.ctx||this,s)}this._firingCount--}}return n&&this._propagateEvent(s),this},listens:function(t,e,n,s){typeof t!="string"&&console.warn('"string" type argument expected');var h=e;typeof e!="function"&&(s=!!e,h=void 0,n=void 0);var l=this._events&&this._events[t];if(l&&l.length&&this._listens(t,h,n)!==!1)return!0;if(s){for(var m in this._eventParents)if(this._eventParents[m].listens(t,e,n,s))return!0}return!1},_listens:function(t,e,n){if(!this._events)return!1;var s=this._events[t]||[];if(!e)return!!s.length;n===this&&(n=void 0);for(var h=0,l=s.length;h<l;h++)if(s[h].fn===e&&s[h].ctx===n)return h;return!1},once:function(t,e,n){if(typeof t=="object")for(var s in t)this._on(s,t[s],e,!0);else{t=M(t);for(var h=0,l=t.length;h<l;h++)this._on(t[h],e,n,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[d(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[d(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,u({layer:t.target,propagatedFrom:t.target},t),!0)}};at.addEventListener=at.on,at.removeEventListener=at.clearAllEventListeners=at.off,at.addOneTimeEventListener=at.once,at.fireEvent=at.fire,at.hasEventListeners=at.listens;var kt=lt.extend(at);function z(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var vt=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};z.prototype={clone:function(){return new z(this.x,this.y)},add:function(t){return this.clone()._add(O(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(O(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new z(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new z(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=vt(this.x),this.y=vt(this.y),this},distanceTo:function(t){t=O(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=O(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=O(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function O(t,e,n){return t instanceof z?t:B(t)?new z(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new z(t.x,t.y):new z(t,e,n)}function j(t,e){if(t)for(var n=e?[t,e]:t,s=0,h=n.length;s<h;s++)this.extend(n[s])}j.prototype={extend:function(t){var e,n;if(!t)return this;if(t instanceof z||typeof t[0]=="number"||"x"in t)e=n=O(t);else if(t=ft(t),e=t.min,n=t.max,!e||!n)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=n.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(t){return O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return O(this.min.x,this.max.y)},getTopRight:function(){return O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return typeof t[0]=="number"||t instanceof z?t=O(t):t=ft(t),t instanceof j?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=ft(t);var e=this.min,n=this.max,s=t.min,h=t.max,l=h.x>=e.x&&s.x<=n.x,m=h.y>=e.y&&s.y<=n.y;return l&&m},overlaps:function(t){t=ft(t);var e=this.min,n=this.max,s=t.min,h=t.max,l=h.x>e.x&&s.x<n.x,m=h.y>e.y&&s.y<n.y;return l&&m},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,n=this.max,s=Math.abs(e.x-n.x)*t,h=Math.abs(e.y-n.y)*t;return ft(O(e.x-s,e.y-h),O(n.x+s,n.y+h))},equals:function(t){return t?(t=ft(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function ft(t,e){return!t||t instanceof j?t:new j(t,e)}function dt(t,e){if(t)for(var n=e?[t,e]:t,s=0,h=n.length;s<h;s++)this.extend(n[s])}dt.prototype={extend:function(t){var e=this._southWest,n=this._northEast,s,h;if(t instanceof Y)s=t,h=t;else if(t instanceof dt){if(s=t._southWest,h=t._northEast,!s||!h)return this}else return t?this.extend(H(t)||nt(t)):this;return!e&&!n?(this._southWest=new Y(s.lat,s.lng),this._northEast=new Y(h.lat,h.lng)):(e.lat=Math.min(s.lat,e.lat),e.lng=Math.min(s.lng,e.lng),n.lat=Math.max(h.lat,n.lat),n.lng=Math.max(h.lng,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,s=Math.abs(e.lat-n.lat)*t,h=Math.abs(e.lng-n.lng)*t;return new dt(new Y(e.lat-s,e.lng-h),new Y(n.lat+s,n.lng+h))},getCenter:function(){return new Y((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Y(this.getNorth(),this.getWest())},getSouthEast:function(){return new Y(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof Y||"lat"in t?t=H(t):t=nt(t);var e=this._southWest,n=this._northEast,s,h;return t instanceof dt?(s=t.getSouthWest(),h=t.getNorthEast()):s=h=t,s.lat>=e.lat&&h.lat<=n.lat&&s.lng>=e.lng&&h.lng<=n.lng},intersects:function(t){t=nt(t);var e=this._southWest,n=this._northEast,s=t.getSouthWest(),h=t.getNorthEast(),l=h.lat>=e.lat&&s.lat<=n.lat,m=h.lng>=e.lng&&s.lng<=n.lng;return l&&m},overlaps:function(t){t=nt(t);var e=this._southWest,n=this._northEast,s=t.getSouthWest(),h=t.getNorthEast(),l=h.lat>e.lat&&s.lat<n.lat,m=h.lng>e.lng&&s.lng<n.lng;return l&&m},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=nt(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function nt(t,e){return t instanceof dt?t:new dt(t,e)}function Y(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,n!==void 0&&(this.alt=+n)}Y.prototype={equals:function(t,e){if(!t)return!1;t=H(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+v(this.lat,t)+", "+v(this.lng,t)+")"},distanceTo:function(t){return Ht.distance(this,H(t))},wrap:function(){return Ht.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return nt([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new Y(this.lat,this.lng,this.alt)}};function H(t,e,n){return t instanceof Y?t:B(t)&&typeof t[0]!="object"?t.length===3?new Y(t[0],t[1],t[2]):t.length===2?new Y(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new Y(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new Y(t,e,n)}var Ot={latLngToPoint:function(t,e){var n=this.projection.project(t),s=this.scale(e);return this.transformation._transform(n,s)},pointToLatLng:function(t,e){var n=this.scale(e),s=this.transformation.untransform(t,n);return this.projection.unproject(s)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),s=this.transformation.transform(e.min,n),h=this.transformation.transform(e.max,n);return new j(s,h)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?y(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?y(t.lat,this.wrapLat,!0):t.lat,s=t.alt;return new Y(n,e,s)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),s=e.lat-n.lat,h=e.lng-n.lng;if(s===0&&h===0)return t;var l=t.getSouthWest(),m=t.getNorthEast(),x=new Y(l.lat-s,l.lng-h),P=new Y(m.lat-s,m.lng-h);return new dt(x,P)}},Ht=u({},Ot,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,s=t.lat*n,h=e.lat*n,l=Math.sin((e.lat-t.lat)*n/2),m=Math.sin((e.lng-t.lng)*n/2),x=l*l+Math.cos(s)*Math.cos(h)*m*m,P=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return this.R*P}}),zn=6378137,ki={R:zn,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,s=Math.max(Math.min(n,t.lat),-n),h=Math.sin(s*e);return new z(this.R*t.lng*e,this.R*Math.log((1+h)/(1-h))/2)},unproject:function(t){var e=180/Math.PI;return new Y((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=zn*Math.PI;return new j([-t,-t],[t,t])}()};function Si(t,e,n,s){if(B(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=n,this._d=s}Si.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new z((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function de(t,e,n,s){return new Si(t,e,n,s)}var Ci=u({},Ht,{code:"EPSG:3857",projection:ki,transformation:function(){var t=.5/(Math.PI*ki.R);return de(t,.5,-t,.5)}()}),es=u({},Ci,{code:"EPSG:900913"});function On(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Bn(t,e){var n="",s,h,l,m,x,P;for(s=0,l=t.length;s<l;s++){for(x=t[s],h=0,m=x.length;h<m;h++)P=x[h],n+=(h?"L":"M")+P.x+" "+P.y;n+=e?E.svg?"z":"x":""}return n||"M0 0"}var Ei=document.documentElement.style,Fe="ActiveXObject"in window,is=Fe&&!document.addEventListener,Zn="msLaunchUri"in navigator&&!("documentMode"in document),Ai=St("webkit"),Nn=St("android"),Dn=St("android 2")||St("android 3"),ns=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),rs=Nn&&St("Google")&&ns<537&&!("AudioNode"in window),Ii=!!window.opera,Rn=!Zn&&St("chrome"),Fn=St("gecko")&&!Ai&&!Ii&&!Fe,os=!Rn&&St("safari"),Hn=St("phantom"),$n="OTransition"in Ei,ss=navigator.platform.indexOf("Win")===0,Gn=Fe&&"transition"in Ei,zi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Dn,Wn="MozPerspective"in Ei,as=!window.L_DISABLE_3D&&(Gn||zi||Wn)&&!$n&&!Hn,pe=typeof orientation<"u"||St("mobile"),hs=pe&&Ai,us=pe&&zi,Un=!window.PointerEvent&&window.MSPointerEvent,Vn=!!(window.PointerEvent||Un),qn="ontouchstart"in window||!!window.TouchEvent,ls=!window.L_NO_TOUCH&&(qn||Vn),cs=pe&&Ii,fs=pe&&Fn,ds=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ps=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",g,e),window.removeEventListener("testPassiveEventSupport",g,e)}catch{}return t}(),_s=function(){return!!document.createElement("canvas").getContext}(),Oi=!!(document.createElementNS&&On("svg").createSVGRect),ms=!!Oi&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),gs=!Oi&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),vs=navigator.platform.indexOf("Mac")===0,ys=navigator.platform.indexOf("Linux")===0;function St(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var E={ie:Fe,ielt9:is,edge:Zn,webkit:Ai,android:Nn,android23:Dn,androidStock:rs,opera:Ii,chrome:Rn,gecko:Fn,safari:os,phantom:Hn,opera12:$n,win:ss,ie3d:Gn,webkit3d:zi,gecko3d:Wn,any3d:as,mobile:pe,mobileWebkit:hs,mobileWebkit3d:us,msPointer:Un,pointer:Vn,touch:ls,touchNative:qn,mobileOpera:cs,mobileGecko:fs,retina:ds,passiveEvents:ps,canvas:_s,svg:Oi,vml:gs,inlineSvg:ms,mac:vs,linux:ys},Yn=E.msPointer?"MSPointerDown":"pointerdown",Xn=E.msPointer?"MSPointerMove":"pointermove",Kn=E.msPointer?"MSPointerUp":"pointerup",jn=E.msPointer?"MSPointerCancel":"pointercancel",Bi={touchstart:Yn,touchmove:Xn,touchend:Kn,touchcancel:jn},Jn={touchstart:Ts,touchmove:He,touchend:He,touchcancel:He},Qt={},Qn=!1;function ws(t,e,n){return e==="touchstart"&&bs(),Jn[e]?(n=Jn[e].bind(this,n),t.addEventListener(Bi[e],n,!1),n):(console.warn("wrong event specified:",e),g)}function xs(t,e,n){if(!Bi[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(Bi[e],n,!1)}function Ls(t){Qt[t.pointerId]=t}function Ps(t){Qt[t.pointerId]&&(Qt[t.pointerId]=t)}function tr(t){delete Qt[t.pointerId]}function bs(){Qn||(document.addEventListener(Yn,Ls,!0),document.addEventListener(Xn,Ps,!0),document.addEventListener(Kn,tr,!0),document.addEventListener(jn,tr,!0),Qn=!0)}function He(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var n in Qt)e.touches.push(Qt[n]);e.changedTouches=[e],t(e)}}function Ts(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&ut(e),He(t,e)}function Ms(t){var e={},n,s;for(s in t)n=t[s],e[s]=n&&n.bind?n.bind(t):n;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var ks=200;function Ss(t,e){t.addEventListener("dblclick",e);var n=0,s;function h(l){if(l.detail!==1){s=l.detail;return}if(!(l.pointerType==="mouse"||l.sourceCapabilities&&!l.sourceCapabilities.firesTouchEvents)){var m=or(l);if(!(m.some(function(P){return P instanceof HTMLLabelElement&&P.attributes.for})&&!m.some(function(P){return P instanceof HTMLInputElement||P instanceof HTMLSelectElement}))){var x=Date.now();x-n<=ks?(s++,s===2&&e(Ms(l))):s=1,n=x}}}return t.addEventListener("click",h),{dblclick:e,simDblclick:h}}function Cs(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var Zi=We(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),_e=We(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),er=_e==="webkitTransition"||_e==="OTransition"?_e+"End":"transitionend";function ir(t){return typeof t=="string"?document.getElementById(t):t}function me(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||n==="auto")&&document.defaultView){var s=document.defaultView.getComputedStyle(t,null);n=s?s[e]:null}return n==="auto"?null:n}function W(t,e,n){var s=document.createElement(t);return s.className=e||"",n&&n.appendChild(s),s}function J(t){var e=t.parentNode;e&&e.removeChild(t)}function $e(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function te(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ee(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function Ni(t,e){if(t.classList!==void 0)return t.classList.contains(e);var n=Ge(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function N(t,e){if(t.classList!==void 0)for(var n=M(e),s=0,h=n.length;s<h;s++)t.classList.add(n[s]);else if(!Ni(t,e)){var l=Ge(t);Di(t,(l?l+" ":"")+e)}}function et(t,e){t.classList!==void 0?t.classList.remove(e):Di(t,w((" "+Ge(t)+" ").replace(" "+e+" "," ")))}function Di(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function Ge(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function yt(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&Es(t,e)}function Es(t,e){var n=!1,s="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(s)}catch{if(e===1)return}e=Math.round(e*100),n?(n.Enabled=e!==100,n.Opacity=e):t.style.filter+=" progid:"+s+"(opacity="+e+")"}function We(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function Wt(t,e,n){var s=e||new z(0,0);t.style[Zi]=(E.ie3d?"translate("+s.x+"px,"+s.y+"px)":"translate3d("+s.x+"px,"+s.y+"px,0)")+(n?" scale("+n+")":"")}function rt(t,e){t._leaflet_pos=e,E.any3d?Wt(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Ut(t){return t._leaflet_pos||new z(0,0)}var ge,ve,Ri;if("onselectstart"in document)ge=function(){Z(window,"selectstart",ut)},ve=function(){K(window,"selectstart",ut)};else{var ye=We(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ge=function(){if(ye){var t=document.documentElement.style;Ri=t[ye],t[ye]="none"}},ve=function(){ye&&(document.documentElement.style[ye]=Ri,Ri=void 0)}}function Fi(){Z(window,"dragstart",ut)}function Hi(){K(window,"dragstart",ut)}var Ue,$i;function Gi(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Ve(),Ue=t,$i=t.style.outlineStyle,t.style.outlineStyle="none",Z(window,"keydown",Ve))}function Ve(){Ue&&(Ue.style.outlineStyle=$i,Ue=void 0,$i=void 0,K(window,"keydown",Ve))}function nr(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Wi(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var As={__proto__:null,TRANSFORM:Zi,TRANSITION:_e,TRANSITION_END:er,get:ir,getStyle:me,create:W,remove:J,empty:$e,toFront:te,toBack:ee,hasClass:Ni,addClass:N,removeClass:et,setClass:Di,getClass:Ge,setOpacity:yt,testProp:We,setTransform:Wt,setPosition:rt,getPosition:Ut,get disableTextSelection(){return ge},get enableTextSelection(){return ve},disableImageDrag:Fi,enableImageDrag:Hi,preventOutline:Gi,restoreOutline:Ve,getSizedParentNode:nr,getScale:Wi};function Z(t,e,n,s){if(e&&typeof e=="object")for(var h in e)Vi(t,h,e[h],n);else{e=M(e);for(var l=0,m=e.length;l<m;l++)Vi(t,e[l],n,s)}return this}var Ct="_leaflet_events";function K(t,e,n,s){if(arguments.length===1)rr(t),delete t[Ct];else if(e&&typeof e=="object")for(var h in e)qi(t,h,e[h],n);else if(e=M(e),arguments.length===2)rr(t,function(x){return Q(e,x)!==-1});else for(var l=0,m=e.length;l<m;l++)qi(t,e[l],n,s);return this}function rr(t,e){for(var n in t[Ct]){var s=n.split(/\d/)[0];(!e||e(s))&&qi(t,s,null,null,n)}}var Ui={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Vi(t,e,n,s){var h=e+d(n)+(s?"_"+d(s):"");if(t[Ct]&&t[Ct][h])return this;var l=function(x){return n.call(s||t,x||window.event)},m=l;!E.touchNative&&E.pointer&&e.indexOf("touch")===0?l=ws(t,e,l):E.touch&&e==="dblclick"?l=Ss(t,l):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(Ui[e]||e,l,E.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(l=function(x){x=x||window.event,Xi(t,x)&&m(x)},t.addEventListener(Ui[e],l,!1)):t.addEventListener(e,m,!1):t.attachEvent("on"+e,l),t[Ct]=t[Ct]||{},t[Ct][h]=l}function qi(t,e,n,s,h){h=h||e+d(n)+(s?"_"+d(s):"");var l=t[Ct]&&t[Ct][h];if(!l)return this;!E.touchNative&&E.pointer&&e.indexOf("touch")===0?xs(t,e,l):E.touch&&e==="dblclick"?Cs(t,l):"removeEventListener"in t?t.removeEventListener(Ui[e]||e,l,!1):t.detachEvent("on"+e,l),t[Ct][h]=null}function Vt(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Yi(t){return Vi(t,"wheel",Vt),this}function we(t){return Z(t,"mousedown touchstart dblclick contextmenu",Vt),t._leaflet_disable_click=!0,this}function ut(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function qt(t){return ut(t),Vt(t),this}function or(t){if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;)e.push(n),n=n.parentNode;return e}function sr(t,e){if(!e)return new z(t.clientX,t.clientY);var n=Wi(e),s=n.boundingClientRect;return new z((t.clientX-s.left)/n.x-e.clientLeft,(t.clientY-s.top)/n.y-e.clientTop)}var Is=E.linux&&E.chrome?window.devicePixelRatio:E.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ar(t){return E.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Is:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Xi(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch{return!1}return n!==t}var zs={__proto__:null,on:Z,off:K,stopPropagation:Vt,disableScrollPropagation:Yi,disableClickPropagation:we,preventDefault:ut,stop:qt,getPropagationPath:or,getMousePosition:sr,getWheelDelta:ar,isExternalTarget:Xi,addListener:Z,removeListener:K},hr=kt.extend({run:function(t,e,n,s){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(s||.5,.2),this._startPos=Ut(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=C(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=this._duration*1e3;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),rt(this._el,n),this.fire("step")},_complete:function(){q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),$=kt.extend({options:{crs:Ci,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=T(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(H(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=_e&&E.any3d&&!E.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Z(this._proxy,er,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(H(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==void 0&&(n.zoom=u({animate:n.animate},n.zoom),n.pan=u({animate:n.animate,duration:n.duration},n.pan));var s=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,n.pan&&n.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(E.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(E.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var s=this.getZoomScale(e),h=this.getSize().divideBy(2),l=t instanceof z?t:this.latLngToContainerPoint(t),m=l.subtract(h).multiplyBy(1-1/s),x=this.containerPointToLatLng(h.add(m));return this.setView(x,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():nt(t);var n=O(e.paddingTopLeft||e.padding||[0,0]),s=O(e.paddingBottomRight||e.padding||[0,0]),h=this.getBoundsZoom(t,!1,n.add(s));if(h=typeof e.maxZoom=="number"?Math.min(e.maxZoom,h):h,h===1/0)return{center:t.getCenter(),zoom:h};var l=s.subtract(n).divideBy(2),m=this.project(t.getSouthWest(),h),x=this.project(t.getNorthEast(),h),P=this.unproject(m.add(x).divideBy(2).add(l),h);return{center:P,zoom:h}},fitBounds:function(t,e){if(t=nt(t),!t.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=O(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new hr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){N(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(n=n||{},n.animate===!1||!E.any3d)return this.setView(t,e,n);this._stop();var s=this.project(this.getCenter()),h=this.project(t),l=this.getSize(),m=this._zoom;t=H(t),e=e===void 0?m:e;var x=Math.max(l.x,l.y),P=x*this.getZoomScale(m,e),b=h.distanceTo(s)||1,S=1.42,I=S*S;function R(ot){var ri=ot?-1:1,xa=ot?P:x,La=P*P-x*x+ri*I*I*b*b,Pa=2*xa*I*b,an=La/Pa,$r=Math.sqrt(an*an+1)-an,ba=$r<1e-9?-18:Math.log($r);return ba}function ct(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function ht(ot){return(Math.exp(ot)+Math.exp(-ot))/2}function xt(ot){return ct(ot)/ht(ot)}var pt=R(0);function ae(ot){return x*(ht(pt)/ht(pt+S*ot))}function ga(ot){return x*(ht(pt)*xt(pt+S*ot)-ct(pt))/I}function va(ot){return 1-Math.pow(1-ot,1.5)}var ya=Date.now(),Fr=(R(1)-pt)/S,wa=n.duration?1e3*n.duration:1e3*Fr*.8;function Hr(){var ot=(Date.now()-ya)/wa,ri=va(ot)*Fr;ot<=1?(this._flyToFrame=C(Hr,this),this._move(this.unproject(s.add(h.subtract(s).multiplyBy(ga(ri)/b)),m),this.getScaleZoom(x/ae(ri),m),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),Hr.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=nt(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),s=this._limitCenter(n,this._zoom,nt(t));return n.equals(s)||this.panTo(s,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var n=O(e.paddingTopLeft||e.padding||[0,0]),s=O(e.paddingBottomRight||e.padding||[0,0]),h=this.project(this.getCenter()),l=this.project(t),m=this.getPixelBounds(),x=ft([m.min.add(n),m.max.subtract(s)]),P=x.getSize();if(!x.contains(l)){this._enforcingBounds=!0;var b=l.subtract(x.getCenter()),S=x.extend(l).getSize().subtract(P);h.x+=b.x<0?-S.x:S.x,h.y+=b.y<0?-S.y:S.y,this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=u({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),s=e.divideBy(2).round(),h=n.divideBy(2).round(),l=s.subtract(h);return!l.x&&!l.y?this:(t.animate&&t.pan?this.panBy(l):(t.pan&&this._rawPanBy(l),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=u({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=f(this._handleGeolocationResponse,this),n=f(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,n=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,n=t.coords.longitude,s=new Y(e,n),h=s.toBounds(t.coords.accuracy*2),l=this._locateOptions;if(l.setView){var m=this.getBoundsZoom(h);this.setView(s,l.maxZoom?Math.min(m,l.maxZoom):m)}var x={latlng:s,bounds:h,timestamp:t.timestamp};for(var P in t.coords)typeof t.coords[P]=="number"&&(x[P]=t.coords[P]);this.fire("locationfound",x)}},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),J(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)J(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),s=W("div",n,e||this._mapPane);return t&&(this._panes[t]=s),s},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new dt(e,n)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=nt(t),n=O(n||[0,0]);var s=this.getZoom()||0,h=this.getMinZoom(),l=this.getMaxZoom(),m=t.getNorthWest(),x=t.getSouthEast(),P=this.getSize().subtract(n),b=ft(this.project(x,s),this.project(m,s)).getSize(),S=E.any3d?this.options.zoomSnap:1,I=P.x/b.x,R=P.y/b.y,ct=e?Math.max(I,R):Math.min(I,R);return s=this.getScaleZoom(ct,s),S&&(s=Math.round(s/(S/100))*(S/100),s=e?Math.ceil(s/S)*S:Math.floor(s/S)*S),Math.max(h,Math.min(l,s))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new z(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new j(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=e===void 0?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=e===void 0?this._zoom:e;var s=n.zoom(t*n.scale(e));return isNaN(s)?1/0:s},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(H(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(O(t),e)},layerPointToLatLng:function(t){var e=O(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(H(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(H(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(nt(t))},distance:function(t,e){return this.options.crs.distance(H(t),H(e))},containerPointToLayerPoint:function(t){return O(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return O(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(O(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(H(t)))},mouseEventToContainerPoint:function(t){return sr(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ir(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Z(e,"scroll",this._onScroll,this),this._containerId=d(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&E.any3d,N(t,"leaflet-container"+(E.touch?" leaflet-touch":"")+(E.retina?" leaflet-retina":"")+(E.ielt9?" leaflet-oldie":"")+(E.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=me(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),rt(this._mapPane,new z(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(N(t.markerPane,"leaflet-zoom-hide"),N(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,n){rt(this._mapPane,new z(0,0));var s=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var h=this._zoom!==e;this._moveStart(h,n)._move(t,e)._moveEnd(h),this.fire("viewreset"),s&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n,s){e===void 0&&(e=this._zoom);var h=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),s?n&&n.pinch&&this.fire("zoom",n):((h||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){rt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[d(this._container)]=this;var e=t?K:Z;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),E.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){q(this._resizeRequest),this._resizeRequest=C(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n=[],s,h=e==="mouseout"||e==="mouseover",l=t.target||t.srcElement,m=!1;l;){if(s=this._targets[d(l)],s&&(e==="click"||e==="preclick")&&this._draggableMoved(s)){m=!0;break}if(s&&s.listens(e,!0)&&(h&&!Xi(l,t)||(n.push(s),h))||l===this._container)break;l=l.parentNode}return!n.length&&!m&&!h&&this.listens(e,!0)&&(n=[this]),n},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var n=t.type;n==="mousedown"&&Gi(e),this._fireDOMEvent(t,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if(t.type==="click"){var s=u({},t);s.type="preclick",this._fireDOMEvent(s,s.type,n)}var h=this._findEventTargets(t,e);if(n){for(var l=[],m=0;m<n.length;m++)n[m].listens(e,!0)&&l.push(n[m]);h=l.concat(h)}if(h.length){e==="contextmenu"&&ut(t);var x=h[0],P={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var b=x.getLatLng&&(!x._radius||x._radius<=10);P.containerPoint=b?this.latLngToContainerPoint(x.getLatLng()):this.mouseEventToContainerPoint(t),P.layerPoint=this.containerPointToLayerPoint(P.containerPoint),P.latlng=b?x.getLatLng():this.layerPointToLatLng(P.layerPoint)}for(m=0;m<h.length;m++)if(h[m].fire(e,P,!0),P.originalEvent._stopped||h[m].options.bubblingMouseEvents===!1&&Q(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Ut(this._mapPane)||new z(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var s=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(s)},_latLngBoundsToNewLayerBounds:function(t,e,n){var s=this._getNewPixelOrigin(n,e);return ft([this.project(t.getSouthWest(),e)._subtract(s),this.project(t.getNorthWest(),e)._subtract(s),this.project(t.getSouthEast(),e)._subtract(s),this.project(t.getNorthEast(),e)._subtract(s)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var s=this.project(t,e),h=this.getSize().divideBy(2),l=new j(s.subtract(h),s.add(h)),m=this._getBoundsOffset(l,n,e);return Math.abs(m.x)<=1&&Math.abs(m.y)<=1?t:this.unproject(s.add(m),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),s=new j(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(s,e))},_getBoundsOffset:function(t,e,n){var s=ft(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),h=s.min.subtract(t.min),l=s.max.subtract(t.max),m=this._rebound(h.x,-l.x),x=this._rebound(h.y,-l.y);return new z(m,x)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),s=E.any3d?this.options.zoomSnap:1;return s&&(t=Math.round(t/s)*s),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){et(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(n)?!1:(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=W("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var n=Zi,s=this._proxy.style[n];Wt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),s===this._proxy.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){J(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Wt(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var s=this.getZoomScale(e),h=this._getCenterOffset(t)._divideBy(1-1/s);return n.animate!==!0&&!this.getSize().contains(h)?!1:(C(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,n,s){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,N(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:s}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&et(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Os(t,e){return new $(t,e)}var Lt=lt.extend({options:{position:"topright"},initialize:function(t){T(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),s=t._controlCorners[n];return N(e,"leaflet-control"),n.indexOf("bottom")!==-1?s.insertBefore(e,s.firstChild):s.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(J(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),xe=function(t){return new Lt(t)};$.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=W("div",e+"control-container",this._container);function s(h,l){var m=e+h+" "+e+l;t[h+l]=W("div",m,n)}s("top","left"),s("top","right"),s("bottom","left"),s("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)J(this._controlCorners[t]);J(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ur=Lt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,s){return n<s?-1:s<n?1:0}},initialize:function(t,e,n){T(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var s in t)this._addLayer(t[s],s);for(s in e)this._addLayer(e[s],s,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Lt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(d(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){N(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(N(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):et(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return et(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=W("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),we(e),Yi(e);var s=this._section=W("section",t+"-list");n&&(this._map.on("click",this.collapse,this),Z(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var h=this._layersLink=W("a",t+"-toggle",e);h.href="#",h.title="Layers",h.setAttribute("role","button"),Z(h,{keydown:function(l){l.keyCode===13&&this._expandSafely()},click:function(l){ut(l),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=W("div",t+"-base",s),this._separator=W("div",t+"-separator",s),this._overlaysList=W("div",t+"-overlays",s),e.appendChild(s)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&d(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(f(function(s,h){return this.options.sortFunction(s.layer,h.layer,s.name,h.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;$e(this._baseLayersList),$e(this._overlaysList),this._layerControlInputs=[];var t,e,n,s,h=0;for(n=0;n<this._layers.length;n++)s=this._layers[n],this._addItem(s),e=e||s.overlay,t=t||!s.overlay,h+=s.overlay?0:1;return this.options.hideSingleBase&&(t=t&&h>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(d(t.target)),n=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",s=document.createElement("div");return s.innerHTML=n,s.firstChild},_addItem:function(t){var e=document.createElement("label"),n=this._map.hasLayer(t.layer),s;t.overlay?(s=document.createElement("input"),s.type="checkbox",s.className="leaflet-control-layers-selector",s.defaultChecked=n):s=this._createRadioElement("leaflet-base-layers_"+d(this),n),this._layerControlInputs.push(s),s.layerId=d(t.layer),Z(s,"click",this._onInputClick,this);var h=document.createElement("span");h.innerHTML=" "+t.name;var l=document.createElement("span");e.appendChild(l),l.appendChild(s),l.appendChild(h);var m=t.overlay?this._overlaysList:this._baseLayersList;return m.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,n,s=[],h=[];this._handlingClick=!0;for(var l=t.length-1;l>=0;l--)e=t[l],n=this._getLayer(e.layerId).layer,e.checked?s.push(n):e.checked||h.push(n);for(l=0;l<h.length;l++)this._map.hasLayer(h[l])&&this._map.removeLayer(h[l]);for(l=0;l<s.length;l++)this._map.hasLayer(s[l])||this._map.addLayer(s[l]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,n,s=this._map.getZoom(),h=t.length-1;h>=0;h--)e=t[h],n=this._getLayer(e.layerId).layer,e.disabled=n.options.minZoom!==void 0&&s<n.options.minZoom||n.options.maxZoom!==void 0&&s>n.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,Z(t,"click",ut),this.expand();var e=this;setTimeout(function(){K(t,"click",ut),e._preventClick=!1})}}),Bs=function(t,e,n){return new ur(t,e,n)},Ki=Lt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=W("div",e+" leaflet-bar"),s=this.options;return this._zoomInButton=this._createButton(s.zoomInText,s.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(s.zoomOutText,s.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,s,h){var l=W("a",n,s);return l.innerHTML=t,l.href="#",l.title=e,l.setAttribute("role","button"),l.setAttribute("aria-label",e),we(l),Z(l,"click",qt),Z(l,"click",h,this),Z(l,"click",this._refocusOnMap,this),l},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";et(this._zoomInButton,e),et(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(N(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(N(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});$.mergeOptions({zoomControl:!0}),$.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ki,this.addControl(this.zoomControl))});var Zs=function(t){return new Ki(t)},lr=Lt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=W("div",e),s=this.options;return this._addScales(s,e+"-line",n),t.on(s.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=W("div",e,n)),t.imperial&&(this._iScale=W("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e=t*3.2808399,n,s,h;e>5280?(n=e/5280,s=this._getRoundNum(n),this._updateScale(this._iScale,s+" mi",s/n)):(h=this._getRoundNum(e),this._updateScale(this._iScale,h+" ft",h/e))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),Ns=function(t){return new lr(t)},Ds='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ji=Lt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(E.inlineSvg?Ds+" ":"")+"Leaflet</a>"},initialize:function(t){T(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=W("div","leaflet-control-attribution"),we(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});$.mergeOptions({attributionControl:!0}),$.addInitHook(function(){this.options.attributionControl&&new ji().addTo(this)});var Rs=function(t){return new ji(t)};Lt.Layers=ur,Lt.Zoom=Ki,Lt.Scale=lr,Lt.Attribution=ji,xe.layers=Bs,xe.zoom=Zs,xe.scale=Ns,xe.attribution=Rs;var Et=lt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Et.addTo=function(t,e){return t.addHandler(e,this),this};var Fs={Events:at},cr=E.touch?"touchstart mousedown":"mousedown",$t=kt.extend({options:{clickTolerance:3},initialize:function(t,e,n,s){T(this,s),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Z(this._dragStartTarget,cr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&($t._dragging===this&&this.finishDrag(!0),K(this._dragStartTarget,cr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Ni(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){$t._dragging===this&&this.finishDrag();return}if(!($t._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&($t._dragging=this,this._preventOutline&&Gi(this._element),Fi(),ge(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,n=nr(this._element);this._startPoint=new z(e.clientX,e.clientY),this._startPos=Ut(this._element),this._parentScale=Wi(n);var s=t.type==="mousedown";Z(document,s?"mousemove":"touchmove",this._onMove,this),Z(document,s?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,n=new z(e.clientX,e.clientY)._subtract(this._startPoint);!n.x&&!n.y||Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,ut(t),this._moved||(this.fire("dragstart"),this._moved=!0,N(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),N(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),rt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){et(document.body,"leaflet-dragging"),this._lastTarget&&(et(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),K(document,"mousemove touchmove",this._onMove,this),K(document,"mouseup touchend touchcancel",this._onUp,this),Hi(),ve();var e=this._moved&&this._moving;this._moving=!1,$t._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function fr(t,e,n){var s,h=[1,4,2,8],l,m,x,P,b,S,I,R;for(l=0,S=t.length;l<S;l++)t[l]._code=Yt(t[l],e);for(x=0;x<4;x++){for(I=h[x],s=[],l=0,S=t.length,m=S-1;l<S;m=l++)P=t[l],b=t[m],P._code&I?b._code&I||(R=qe(b,P,I,e,n),R._code=Yt(R,e),s.push(R)):(b._code&I&&(R=qe(b,P,I,e,n),R._code=Yt(R,e),s.push(R)),s.push(P));t=s}return t}function dr(t,e){var n,s,h,l,m,x,P,b,S;if(!t||t.length===0)throw new Error("latlngs not passed");wt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var I=H([0,0]),R=nt(t),ct=R.getNorthWest().distanceTo(R.getSouthWest())*R.getNorthEast().distanceTo(R.getNorthWest());ct<1700&&(I=Ji(t));var ht=t.length,xt=[];for(n=0;n<ht;n++){var pt=H(t[n]);xt.push(e.project(H([pt.lat-I.lat,pt.lng-I.lng])))}for(x=P=b=0,n=0,s=ht-1;n<ht;s=n++)h=xt[n],l=xt[s],m=h.y*l.x-l.y*h.x,P+=(h.x+l.x)*m,b+=(h.y+l.y)*m,x+=m*3;x===0?S=xt[0]:S=[P/x,b/x];var ae=e.unproject(O(S));return H([ae.lat+I.lat,ae.lng+I.lng])}function Ji(t){for(var e=0,n=0,s=0,h=0;h<t.length;h++){var l=H(t[h]);e+=l.lat,n+=l.lng,s++}return H([e/s,n/s])}var Hs={__proto__:null,clipPolygon:fr,polygonCenter:dr,centroid:Ji};function pr(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=Ws(t,n),t=Gs(t,n),t}function _r(t,e,n){return Math.sqrt(Le(t,e,n,!0))}function $s(t,e,n){return Le(t,e,n)}function Gs(t,e){var n=t.length,s=typeof Uint8Array<"u"?Uint8Array:Array,h=new s(n);h[0]=h[n-1]=1,Qi(t,h,e,0,n-1);var l,m=[];for(l=0;l<n;l++)h[l]&&m.push(t[l]);return m}function Qi(t,e,n,s,h){var l=0,m,x,P;for(x=s+1;x<=h-1;x++)P=Le(t[x],t[s],t[h],!0),P>l&&(m=x,l=P);l>n&&(e[m]=1,Qi(t,e,n,s,m),Qi(t,e,n,m,h))}function Ws(t,e){for(var n=[t[0]],s=1,h=0,l=t.length;s<l;s++)Us(t[s],t[h])>e&&(n.push(t[s]),h=s);return h<l-1&&n.push(t[l-1]),n}var mr;function gr(t,e,n,s,h){var l=s?mr:Yt(t,n),m=Yt(e,n),x,P,b;for(mr=m;;){if(!(l|m))return[t,e];if(l&m)return!1;x=l||m,P=qe(t,e,x,n,h),b=Yt(P,n),x===l?(t=P,l=b):(e=P,m=b)}}function qe(t,e,n,s,h){var l=e.x-t.x,m=e.y-t.y,x=s.min,P=s.max,b,S;return n&8?(b=t.x+l*(P.y-t.y)/m,S=P.y):n&4?(b=t.x+l*(x.y-t.y)/m,S=x.y):n&2?(b=P.x,S=t.y+m*(P.x-t.x)/l):n&1&&(b=x.x,S=t.y+m*(x.x-t.x)/l),new z(b,S,h)}function Yt(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function Us(t,e){var n=e.x-t.x,s=e.y-t.y;return n*n+s*s}function Le(t,e,n,s){var h=e.x,l=e.y,m=n.x-h,x=n.y-l,P=m*m+x*x,b;return P>0&&(b=((t.x-h)*m+(t.y-l)*x)/P,b>1?(h=n.x,l=n.y):b>0&&(h+=m*b,l+=x*b)),m=t.x-h,x=t.y-l,s?m*m+x*x:new z(h,l)}function wt(t){return!B(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function vr(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),wt(t)}function yr(t,e){var n,s,h,l,m,x,P,b;if(!t||t.length===0)throw new Error("latlngs not passed");wt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var S=H([0,0]),I=nt(t),R=I.getNorthWest().distanceTo(I.getSouthWest())*I.getNorthEast().distanceTo(I.getNorthWest());R<1700&&(S=Ji(t));var ct=t.length,ht=[];for(n=0;n<ct;n++){var xt=H(t[n]);ht.push(e.project(H([xt.lat-S.lat,xt.lng-S.lng])))}for(n=0,s=0;n<ct-1;n++)s+=ht[n].distanceTo(ht[n+1])/2;if(s===0)b=ht[0];else for(n=0,l=0;n<ct-1;n++)if(m=ht[n],x=ht[n+1],h=m.distanceTo(x),l+=h,l>s){P=(l-s)/h,b=[x.x-P*(x.x-m.x),x.y-P*(x.y-m.y)];break}var pt=e.unproject(O(b));return H([pt.lat+S.lat,pt.lng+S.lng])}var Vs={__proto__:null,simplify:pr,pointToSegmentDistance:_r,closestPointOnSegment:$s,clipSegment:gr,_getEdgeIntersection:qe,_getBitCode:Yt,_sqClosestPointOnSegment:Le,isFlat:wt,_flat:vr,polylineCenter:yr},tn={project:function(t){return new z(t.lng,t.lat)},unproject:function(t){return new Y(t.y,t.x)},bounds:new j([-180,-90],[180,90])},en={R:6378137,R_MINOR:6356752314245179e-9,bounds:new j([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,n=this.R,s=t.lat*e,h=this.R_MINOR/n,l=Math.sqrt(1-h*h),m=l*Math.sin(s),x=Math.tan(Math.PI/4-s/2)/Math.pow((1-m)/(1+m),l/2);return s=-n*Math.log(Math.max(x,1e-10)),new z(t.lng*e*n,s)},unproject:function(t){for(var e=180/Math.PI,n=this.R,s=this.R_MINOR/n,h=Math.sqrt(1-s*s),l=Math.exp(-t.y/n),m=Math.PI/2-2*Math.atan(l),x=0,P=.1,b;x<15&&Math.abs(P)>1e-7;x++)b=h*Math.sin(m),b=Math.pow((1-b)/(1+b),h/2),P=Math.PI/2-2*Math.atan(l*b)-m,m+=P;return new Y(m*e,t.x*e/n)}},qs={__proto__:null,LonLat:tn,Mercator:en,SphericalMercator:ki},Ys=u({},Ht,{code:"EPSG:3395",projection:en,transformation:function(){var t=.5/(Math.PI*en.R);return de(t,.5,-t,.5)}()}),wr=u({},Ht,{code:"EPSG:4326",projection:tn,transformation:de(1/180,1,-1/180,.5)}),Xs=u({},Ot,{projection:tn,transformation:de(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,s=e.lat-t.lat;return Math.sqrt(n*n+s*s)},infinite:!0});Ot.Earth=Ht,Ot.EPSG3395=Ys,Ot.EPSG3857=Ci,Ot.EPSG900913=es,Ot.EPSG4326=wr,Ot.Simple=Xs;var Pt=kt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[d(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[d(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});$.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=d(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=d(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return d(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?B(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[d(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=d(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var s in this._zoomBoundLayers){var h=this._zoomBoundLayers[s].options;t=h.minZoom===void 0?t:Math.min(t,h.minZoom),e=h.maxZoom===void 0?e:Math.max(e,h.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ie=Pt.extend({initialize:function(t,e){T(this,e),this._layers={};var n,s;if(t)for(n=0,s=t.length;n<s;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),n,s;for(n in this._layers)s=this._layers[n],s[t]&&s[t].apply(s,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return d(t)}}),Ks=function(t,e){return new ie(t,e)},Bt=ie.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),ie.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),ie.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new dt;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),js=function(t,e){return new Bt(t,e)},ne=lt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){T(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var s=this._createImg(n,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(s,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),s},_setIconStyles:function(t,e){var n=this.options,s=n[e+"Size"];typeof s=="number"&&(s=[s,s]);var h=O(s),l=O(e==="shadow"&&n.shadowAnchor||n.iconAnchor||h&&h.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),l&&(t.style.marginLeft=-l.x+"px",t.style.marginTop=-l.y+"px"),h&&(t.style.width=h.x+"px",t.style.height=h.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return E.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Js(t){return new ne(t)}var Pe=ne.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Pe.imagePath!="string"&&(Pe.imagePath=this._detectIconPath()),(this.options.imagePath||Pe.imagePath)+ne.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(n,s,h){var l=s.exec(n);return l&&l[h]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=W("div","leaflet-default-icon-path",document.body),e=me(t,"background-image")||me(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),xr=Et.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new $t(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),N(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&et(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,s=this._marker.options.autoPanSpeed,h=this._marker.options.autoPanPadding,l=Ut(e._icon),m=n.getPixelBounds(),x=n.getPixelOrigin(),P=ft(m.min._subtract(x).add(h),m.max._subtract(x).subtract(h));if(!P.contains(l)){var b=O((Math.max(P.max.x,l.x)-P.max.x)/(m.max.x-P.max.x)-(Math.min(P.min.x,l.x)-P.min.x)/(m.min.x-P.min.x),(Math.max(P.max.y,l.y)-P.max.y)/(m.max.y-P.max.y)-(Math.min(P.min.y,l.y)-P.min.y)/(m.min.y-P.min.y)).multiplyBy(s);n.panBy(b,{animate:!1}),this._draggable._newPos._add(b),this._draggable._startPos._add(b),rt(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=C(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(q(this._panRequest),this._panRequest=C(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,s=Ut(e._icon),h=e._map.layerPointToLatLng(s);n&&rt(n,s),e._latlng=h,t.latlng=h,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ye=Pt.extend({options:{icon:new Pe,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){T(this,e),this._latlng=H(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=H(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),s=!1;n!==this._icon&&(this._icon&&this._removeIcon(),s=!0,t.title&&(n.title=t.title),n.tagName==="IMG"&&(n.alt=t.alt||"")),N(n,e),t.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Z(n,"focus",this._panOnFocus,this);var h=t.icon.createShadow(this._shadow),l=!1;h!==this._shadow&&(this._removeShadow(),l=!0),h&&(N(h,e),h.alt=""),this._shadow=h,t.opacity<1&&this._updateOpacity(),s&&this.getPane().appendChild(this._icon),this._initInteraction(),h&&l&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&K(this._icon,"focus",this._panOnFocus,this),J(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&J(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&rt(this._icon,t),this._shadow&&rt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(N(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),xr)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new xr(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&yt(this._icon,t),this._shadow&&yt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,n=e.iconSize?O(e.iconSize):O(0,0),s=e.iconAnchor?O(e.iconAnchor):O(0,0);t.panInside(this._latlng,{paddingTopLeft:s,paddingBottomRight:n.subtract(s)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Qs(t,e){return new Ye(t,e)}var Gt=Pt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return T(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Xe=Gt.extend({options:{fill:!0,radius:10},initialize:function(t,e){T(this,e),this._latlng=H(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=H(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Gt.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),s=[t+n,e+n];this._pxBounds=new j(this._point.subtract(s),this._point.add(s))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ta(t,e){return new Xe(t,e)}var nn=Xe.extend({initialize:function(t,e,n){if(typeof e=="number"&&(e=u({},n,{radius:e})),T(this,e),this._latlng=H(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new dt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Gt.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,s=n.options.crs;if(s.distance===Ht.distance){var h=Math.PI/180,l=this._mRadius/Ht.R/h,m=n.project([e+l,t]),x=n.project([e-l,t]),P=m.add(x).divideBy(2),b=n.unproject(P).lat,S=Math.acos((Math.cos(l*h)-Math.sin(e*h)*Math.sin(b*h))/(Math.cos(e*h)*Math.cos(b*h)))/h;(isNaN(S)||S===0)&&(S=l/Math.cos(Math.PI/180*e)),this._point=P.subtract(n.getPixelOrigin()),this._radius=isNaN(S)?0:P.x-n.project([b,t-S]).x,this._radiusY=P.y-m.y}else{var I=s.unproject(s.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(I).x}this._updateBounds()}});function ea(t,e,n){return new nn(t,e,n)}var Zt=Gt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){T(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,n=null,s=Le,h,l,m=0,x=this._parts.length;m<x;m++)for(var P=this._parts[m],b=1,S=P.length;b<S;b++){h=P[b-1],l=P[b];var I=s(t,h,l,!0);I<e&&(e=I,n=s(t,h,l))}return n&&(n.distance=Math.sqrt(e)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=H(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new dt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return wt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=wt(t),s=0,h=t.length;s<h;s++)n?(e[s]=H(t[s]),this._bounds.extend(e[s])):e[s]=this._convertLatLngs(t[s]);return e},_project:function(){var t=new j;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new z(t,t);this._rawPxBounds&&(this._pxBounds=new j([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,n){var s=t[0]instanceof Y,h=t.length,l,m;if(s){for(m=[],l=0;l<h;l++)m[l]=this._map.latLngToLayerPoint(t[l]),n.extend(m[l]);e.push(m)}else for(l=0;l<h;l++)this._projectLatlngs(t[l],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,n,s,h,l,m,x,P;for(n=0,h=0,l=this._rings.length;n<l;n++)for(P=this._rings[n],s=0,m=P.length;s<m-1;s++)x=gr(P[s],P[s+1],t,s,!0),x&&(e[h]=e[h]||[],e[h].push(x[0]),(x[1]!==P[s+1]||s===m-2)&&(e[h].push(x[1]),h++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,s=t.length;n<s;n++)t[n]=pr(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,s,h,l,m,x,P=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,l=this._parts.length;n<l;n++)for(x=this._parts[n],s=0,m=x.length,h=m-1;s<m;h=s++)if(!(!e&&s===0)&&_r(t,x[h],x[s])<=P)return!0;return!1}});function ia(t,e){return new Zt(t,e)}Zt._flat=vr;var re=Zt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return dr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Zt.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof Y&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Zt.prototype._setLatLngs.call(this,t),wt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return wt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new z(e,e);if(t=new j(t.min.subtract(n),t.max.add(n)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var s=0,h=this._rings.length,l;s<h;s++)l=fr(this._rings[s],t,!0),l.length&&this._parts.push(l)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,n,s,h,l,m,x,P,b;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(l=0,P=this._parts.length;l<P;l++)for(n=this._parts[l],m=0,b=n.length,x=b-1;m<b;x=m++)s=n[m],h=n[x],s.y>t.y!=h.y>t.y&&t.x<(h.x-s.x)*(t.y-s.y)/(h.y-s.y)+s.x&&(e=!e);return e||Zt.prototype._containsPoint.call(this,t,!0)}});function na(t,e){return new re(t,e)}var Nt=Bt.extend({initialize:function(t,e){T(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=B(t)?t:t.features,n,s,h;if(e){for(n=0,s=e.length;n<s;n++)h=e[n],(h.geometries||h.geometry||h.features||h.coordinates)&&this.addData(h);return this}var l=this.options;if(l.filter&&!l.filter(t))return this;var m=Ke(t,l);return m?(m.feature=Qe(t),m.defaultOptions=m.options,this.resetStyle(m),l.onEachFeature&&l.onEachFeature(t,m),this.addLayer(m)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=u({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function Ke(t,e){var n=t.type==="Feature"?t.geometry:t,s=n?n.coordinates:null,h=[],l=e&&e.pointToLayer,m=e&&e.coordsToLatLng||rn,x,P,b,S;if(!s&&!n)return null;switch(n.type){case"Point":return x=m(s),Lr(l,t,x,e);case"MultiPoint":for(b=0,S=s.length;b<S;b++)x=m(s[b]),h.push(Lr(l,t,x,e));return new Bt(h);case"LineString":case"MultiLineString":return P=je(s,n.type==="LineString"?0:1,m),new Zt(P,e);case"Polygon":case"MultiPolygon":return P=je(s,n.type==="Polygon"?1:2,m),new re(P,e);case"GeometryCollection":for(b=0,S=n.geometries.length;b<S;b++){var I=Ke({geometry:n.geometries[b],type:"Feature",properties:t.properties},e);I&&h.push(I)}return new Bt(h);case"FeatureCollection":for(b=0,S=n.features.length;b<S;b++){var R=Ke(n.features[b],e);R&&h.push(R)}return new Bt(h);default:throw new Error("Invalid GeoJSON object.")}}function Lr(t,e,n,s){return t?t(e,n):new Ye(n,s&&s.markersInheritOptions&&s)}function rn(t){return new Y(t[1],t[0],t[2])}function je(t,e,n){for(var s=[],h=0,l=t.length,m;h<l;h++)m=e?je(t[h],e-1,n):(n||rn)(t[h]),s.push(m);return s}function on(t,e){return t=H(t),t.alt!==void 0?[v(t.lng,e),v(t.lat,e),v(t.alt,e)]:[v(t.lng,e),v(t.lat,e)]}function Je(t,e,n,s){for(var h=[],l=0,m=t.length;l<m;l++)h.push(e?Je(t[l],wt(t[l])?0:e-1,n,s):on(t[l],s));return!e&&n&&h.length>0&&h.push(h[0].slice()),h}function oe(t,e){return t.feature?u({},t.feature,{geometry:e}):Qe(e)}function Qe(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var sn={toGeoJSON:function(t){return oe(this,{type:"Point",coordinates:on(this.getLatLng(),t)})}};Ye.include(sn),nn.include(sn),Xe.include(sn),Zt.include({toGeoJSON:function(t){var e=!wt(this._latlngs),n=Je(this._latlngs,e?1:0,!1,t);return oe(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),re.include({toGeoJSON:function(t){var e=!wt(this._latlngs),n=e&&!wt(this._latlngs[0]),s=Je(this._latlngs,n?2:e?1:0,!0,t);return e||(s=[s]),oe(this,{type:(n?"Multi":"")+"Polygon",coordinates:s})}}),ie.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),oe(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var n=e==="GeometryCollection",s=[];return this.eachLayer(function(h){if(h.toGeoJSON){var l=h.toGeoJSON(t);if(n)s.push(l.geometry);else{var m=Qe(l);m.type==="FeatureCollection"?s.push.apply(s,m.features):s.push(m)}}}),n?oe(this,{geometries:s,type:"GeometryCollection"}):{type:"FeatureCollection",features:s}}});function Pr(t,e){return new Nt(t,e)}var ra=Pr,ti=Pt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=nt(e),T(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(N(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){J(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&te(this._image),this},bringToBack:function(){return this._map&&ee(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=nt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:W("img");if(N(e,"leaflet-image-layer"),this._zoomAnimated&&N(e,"leaflet-zoom-animated"),this.options.className&&N(e,this.options.className),e.onselectstart=g,e.onmousemove=g,e.onload=f(this.fire,this,"load"),e.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Wt(this._image,n,e)},_reset:function(){var t=this._image,e=new j(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();rt(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){yt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),oa=function(t,e,n){return new ti(t,e,n)},br=ti.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:W("video");if(N(e,"leaflet-image-layer"),this._zoomAnimated&&N(e,"leaflet-zoom-animated"),this.options.className&&N(e,this.options.className),e.onselectstart=g,e.onmousemove=g,e.onloadeddata=f(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),s=[],h=0;h<n.length;h++)s.push(n[h].src);this._url=n.length>0?s:[e.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var l=0;l<this._url.length;l++){var m=W("source");m.src=this._url[l],e.appendChild(m)}}});function sa(t,e,n){return new br(t,e,n)}var Tr=ti.extend({_initImage:function(){var t=this._image=this._url;N(t,"leaflet-image-layer"),this._zoomAnimated&&N(t,"leaflet-zoom-animated"),this.options.className&&N(t,this.options.className),t.onselectstart=g,t.onmousemove=g}});function aa(t,e,n){return new Tr(t,e,n)}var At=Pt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof Y||B(t))?(this._latlng=H(t),T(this,e)):(T(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&yt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&yt(this._container,1),this.bringToFront(),this.options.interactive&&(N(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(yt(this._container,0),this._removeTimeout=setTimeout(f(J,void 0,this._container),200)):J(this._container),this.options.interactive&&(et(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=H(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&te(this._container),this},bringToBack:function(){return this._map&&ee(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Bt){e=null;var n=this._source._layers;for(var s in n)if(n[s]._map){e=n[s];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=O(this.options.offset),n=this._getAnchor();this._zoomAnimated?rt(this._container,t.add(n)):e=e.add(t).add(n);var s=this._containerBottom=-e.y,h=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=s+"px",this._container.style.left=h+"px"}},_getAnchor:function(){return[0,0]}});$.include({_initOverlay:function(t,e,n,s){var h=e;return h instanceof t||(h=new t(s).setContent(e)),n&&h.setLatLng(n),h}}),Pt.include({_initOverlay:function(t,e,n,s){var h=n;return h instanceof t?(T(h,s),h._source=this):(h=e&&!s?e:new t(s,this),h.setContent(n)),h}});var ei=At.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,At.prototype.openOn.call(this,t)},onAdd:function(t){At.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Gt||this._source.on("preclick",Vt))},onRemove:function(t){At.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Gt||this._source.off("preclick",Vt))},getEvents:function(){var t=At.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=W("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=W("div",t+"-content-wrapper",e);if(this._contentNode=W("div",t+"-content",n),we(e),Yi(this._contentNode),Z(e,"contextmenu",Vt),this._tipContainer=W("div",t+"-tip-container",e),this._tip=W("div",t+"-tip",this._tipContainer),this.options.closeButton){var s=this._closeButton=W("a",t+"-close-button",e);s.setAttribute("role","button"),s.setAttribute("aria-label","Close popup"),s.href="#close",s.innerHTML='<span aria-hidden="true">&#215;</span>',Z(s,"click",function(h){ut(h),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var s=t.offsetHeight,h=this.options.maxHeight,l="leaflet-popup-scrolled";h&&s>h?(e.height=h+"px",N(t,l)):et(t,l),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();rt(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(me(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,s=this._containerWidth,h=new z(this._containerLeft,-n-this._containerBottom);h._add(Ut(this._container));var l=t.layerPointToContainerPoint(h),m=O(this.options.autoPanPadding),x=O(this.options.autoPanPaddingTopLeft||m),P=O(this.options.autoPanPaddingBottomRight||m),b=t.getSize(),S=0,I=0;l.x+s+P.x>b.x&&(S=l.x+s-b.x+P.x),l.x-S-x.x<0&&(S=l.x-x.x),l.y+n+P.y>b.y&&(I=l.y+n-b.y+P.y),l.y-I-x.y<0&&(I=l.y-x.y),(S||I)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([S,I]))}},_getAnchor:function(){return O(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ha=function(t,e){return new ei(t,e)};$.mergeOptions({closePopupOnClick:!0}),$.include({openPopup:function(t,e,n){return this._initOverlay(ei,t,e,n).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Pt.include({bindPopup:function(t,e){return this._popup=this._initOverlay(ei,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Bt||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){qt(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof Gt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var ii=At.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){At.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){At.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=At.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=W("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,s=this._map,h=this._container,l=s.latLngToContainerPoint(s.getCenter()),m=s.layerPointToContainerPoint(t),x=this.options.direction,P=h.offsetWidth,b=h.offsetHeight,S=O(this.options.offset),I=this._getAnchor();x==="top"?(e=P/2,n=b):x==="bottom"?(e=P/2,n=0):x==="center"?(e=P/2,n=b/2):x==="right"?(e=0,n=b/2):x==="left"?(e=P,n=b/2):m.x<l.x?(x="right",e=0,n=b/2):(x="left",e=P+(S.x+I.x)*2,n=b/2),t=t.subtract(O(e,n,!0)).add(S).add(I),et(h,"leaflet-tooltip-right"),et(h,"leaflet-tooltip-left"),et(h,"leaflet-tooltip-top"),et(h,"leaflet-tooltip-bottom"),N(h,"leaflet-tooltip-"+x),rt(h,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&yt(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return O(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ua=function(t,e){return new ii(t,e)};$.include({openTooltip:function(t,e,n){return this._initOverlay(ii,t,e,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Pt.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ii,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Bt||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(Z(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),Z(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,n,s;this._tooltip.options.sticky&&t.originalEvent&&(n=this._map.mouseEventToContainerPoint(t.originalEvent),s=this._map.containerPointToLayerPoint(n),e=this._map.layerPointToLatLng(s)),this._tooltip.setLatLng(e)}});var Mr=ne.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?($e(e),e.appendChild(n.html)):e.innerHTML=n.html!==!1?n.html:"",n.bgPos){var s=O(n.bgPos);e.style.backgroundPosition=-s.x+"px "+-s.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function la(t){return new Mr(t)}ne.Default=Pe;var be=Pt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:E.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){T(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),J(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(te(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ee(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof z?t:new z(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,n=-t(-1/0,1/0),s=0,h=e.length,l;s<h;s++)l=e[s].style.zIndex,e[s]!==this._container&&l&&(n=t(n,+l));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!E.ielt9){yt(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var s in this._tiles){var h=this._tiles[s];if(!(!h.current||!h.loaded)){var l=Math.min(1,(t-h.loaded)/200);yt(h.el,l),l<1?e=!0:(h.active?n=!0:this._onOpaqueTile(h),h.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(q(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=W("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(J(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var s=this._levels[t],h=this._map;return s||(s=this._levels[t]={},s.el=W("div","leaflet-tile-container leaflet-zoom-animated",this._container),s.el.style.zIndex=e,s.origin=h.project(h.unproject(h.getPixelOrigin()),t).round(),s.zoom=t,this._setZoomTransform(s,h.getCenter(),h.getZoom()),g(s.el.offsetWidth),this._onCreateLevel(s)),this._level=s,s}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var s=e.coords;this._retainParent(s.x,s.y,s.z,s.z-5)||this._retainChildren(s.x,s.y,s.z,s.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)J(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,s){var h=Math.floor(t/2),l=Math.floor(e/2),m=n-1,x=new z(+h,+l);x.z=+m;var P=this._tileCoordsToKey(x),b=this._tiles[P];return b&&b.active?(b.retain=!0,!0):(b&&b.loaded&&(b.retain=!0),m>s?this._retainParent(h,l,m,s):!1)},_retainChildren:function(t,e,n,s){for(var h=2*t;h<2*t+2;h++)for(var l=2*e;l<2*e+2;l++){var m=new z(h,l);m.z=n+1;var x=this._tileCoordsToKey(m),P=this._tiles[x];if(P&&P.active){P.retain=!0;continue}else P&&P.loaded&&(P.retain=!0);n+1<s&&this._retainChildren(h,l,n+1,s)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,s){var h=Math.round(e);this.options.maxZoom!==void 0&&h>this.options.maxZoom||this.options.minZoom!==void 0&&h<this.options.minZoom?h=void 0:h=this._clampZoom(h);var l=this.options.updateWhenZooming&&h!==this._tileZoom;(!s||l)&&(this._tileZoom=h,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),h!==void 0&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var s=this._map.getZoomScale(n,t.zoom),h=t.origin.multiplyBy(s).subtract(this._map._getNewPixelOrigin(e,n)).round();E.any3d?Wt(t.el,h,s):rt(t.el,h)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),s=this._tileZoom,h=this._map.getPixelWorldBounds(this._tileZoom);h&&(this._globalTileRange=this._pxBoundsToTileRange(h)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],s).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],s).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],s).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],s).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),s=e.getZoomScale(n,this._tileZoom),h=e.project(t,this._tileZoom).floor(),l=e.getSize().divideBy(s*2);return new j(h.subtract(l),h.add(l))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var s=this._getTiledPixelBounds(t),h=this._pxBoundsToTileRange(s),l=h.getCenter(),m=[],x=this.options.keepBuffer,P=new j(h.getBottomLeft().subtract([x,-x]),h.getTopRight().add([x,-x]));if(!(isFinite(h.min.x)&&isFinite(h.min.y)&&isFinite(h.max.x)&&isFinite(h.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var b in this._tiles){var S=this._tiles[b].coords;(S.z!==this._tileZoom||!P.contains(new z(S.x,S.y)))&&(this._tiles[b].current=!1)}if(Math.abs(n-this._tileZoom)>1){this._setView(t,n);return}for(var I=h.min.y;I<=h.max.y;I++)for(var R=h.min.x;R<=h.max.x;R++){var ct=new z(R,I);if(ct.z=this._tileZoom,!!this._isValidTile(ct)){var ht=this._tiles[this._tileCoordsToKey(ct)];ht?ht.current=!0:m.push(ct)}}if(m.sort(function(pt,ae){return pt.distanceTo(l)-ae.distanceTo(l)}),m.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var xt=document.createDocumentFragment();for(R=0;R<m.length;R++)this._addTile(m[R],xt);this._level.el.appendChild(xt)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var s=this._tileCoordsToBounds(t);return nt(this.options.bounds).overlaps(s)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),s=t.scaleBy(n),h=s.add(n),l=e.unproject(s,t.z),m=e.unproject(h,t.z);return[l,m]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new dt(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new z(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(J(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){N(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=g,t.onmousemove=g,E.ielt9&&this.options.opacity<1&&yt(t,this.options.opacity)},_addTile:function(t,e){var n=this._getTilePos(t),s=this._tileCoordsToKey(t),h=this.createTile(this._wrapCoords(t),f(this._tileReady,this,t));this._initTile(h),this.createTile.length<2&&C(f(this._tileReady,this,t,null,h)),rt(h,n),this._tiles[s]={el:h,coords:t,current:!0},e.appendChild(h),this.fire("tileloadstart",{tile:h,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var s=this._tileCoordsToKey(t);n=this._tiles[s],n&&(n.loaded=+new Date,this._map._fadeAnimated?(yt(n.el,0),q(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(N(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),E.ielt9||!this._map._fadeAnimated?C(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new z(this._wrapX?y(t.x,this._wrapX):t.x,this._wrapY?y(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new j(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function ca(t){return new be(t)}var se=be.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=T(this,e),e.detectRetina&&E.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Z(n,"load",f(this._tileOnLoad,this,e,n)),Z(n,"error",f(this._tileOnError,this,e,n)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:E.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return U(this._url,u(e,this.options))},_tileOnLoad:function(t,e){E.ielt9?setTimeout(f(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var s=this.options.errorTileUrl;s&&e.getAttribute("src")!==s&&(e.src=s),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,s=this.options.zoomOffset;return n&&(t=e-t),t+s},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=g,e.onerror=g,!e.complete)){e.src=k;var n=this._tiles[t].coords;J(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:n})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",k),be.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(!(!this._map||n&&n.getAttribute("src")===k))return be.prototype._tileReady.call(this,t,e,n)}});function kr(t,e){return new se(t,e)}var Sr=se.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=u({},this.defaultWmsParams);for(var s in e)s in this.options||(n[s]=e[s]);e=T(this,e);var h=e.detectRetina&&E.retina?2:1,l=this.getTileSize();n.width=l.x*h,n.height=l.y*h,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,se.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,s=ft(n.project(e[0]),n.project(e[1])),h=s.min,l=s.max,m=(this._wmsVersion>=1.3&&this._crs===wr?[h.y,h.x,l.y,l.x]:[h.x,h.y,l.x,l.y]).join(","),x=se.prototype.getTileUrl.call(this,t);return x+A(this.wmsParams,x,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+m},setParams:function(t,e){return u(this.wmsParams,t),e||this.redraw(),this}});function fa(t,e){return new Sr(t,e)}se.WMS=Sr,kr.wms=fa;var Dt=Pt.extend({options:{padding:.1},initialize:function(t){T(this,t),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),N(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),s=this._map.getSize().multiplyBy(.5+this.options.padding),h=this._map.project(this._center,e),l=s.multiplyBy(-n).add(h).subtract(this._map._getNewPixelOrigin(t,e));E.any3d?Wt(this._container,l,n):rt(this._container,l)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new j(n,n.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Cr=Dt.extend({options:{tolerance:0},getEvents:function(){var t=Dt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Dt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Z(t,"mousemove",this._onMouseMove,this),Z(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Z(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){q(this._redrawRequest),delete this._ctx,J(this._container),K(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Dt.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),s=E.retina?2:1;rt(e,t.min),e.width=s*n.x,e.height=s*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",E.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Dt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[d(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,s=e.prev;n?n.prev=s:this._drawLast=s,s?s.next=n:this._drawFirst=n,delete t._order,delete this._layers[d(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),n=[],s,h;for(h=0;h<e.length;h++){if(s=Number(e[h]),isNaN(s))return;n.push(s)}t.options._dashArray=n}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||C(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new j,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var s=this._drawFirst;s;s=s.next)t=s.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,s,h,l,m=t._parts,x=m.length,P=this._ctx;if(x){for(P.beginPath(),n=0;n<x;n++){for(s=0,h=m[n].length;s<h;s++)l=m[n][s],P[s?"lineTo":"moveTo"](l.x,l.y);e&&P.closePath()}this._fillStroke(P,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,n=this._ctx,s=Math.max(Math.round(t._radius),1),h=(Math.max(Math.round(t._radiusY),1)||s)/s;h!==1&&(n.save(),n.scale(1,h)),n.beginPath(),n.arc(e.x,e.y/h,s,0,Math.PI*2,!1),h!==1&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&n.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),n,s,h=this._drawFirst;h;h=h.next)n=h.layer,n.options.interactive&&n._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(n))&&(s=n);this._fireEvent(s?[s]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(et(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,s,h=this._drawFirst;h;h=h.next)n=h.layer,n.options.interactive&&n._containsPoint(e)&&(s=n);s!==this._hoveredLayer&&(this._handleMouseOut(t),s&&(N(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseover"),this._hoveredLayer=s)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,s=e.prev;if(n)n.prev=s;else return;s?s.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,s=e.prev;if(s)s.next=n;else return;n?n.prev=s:s&&(this._drawLast=s),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function Er(t){return E.canvas?new Cr(t):null}var Te=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),da={_initContainer:function(){this._container=W("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Dt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Te("shape");N(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Te("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;J(e),t.removeInteractiveTarget(e),delete this._layers[d(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,s=t.options,h=t._container;h.stroked=!!s.stroke,h.filled=!!s.fill,s.stroke?(e||(e=t._stroke=Te("stroke")),h.appendChild(e),e.weight=s.weight+"px",e.color=s.color,e.opacity=s.opacity,s.dashArray?e.dashStyle=B(s.dashArray)?s.dashArray.join(" "):s.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=s.lineCap.replace("butt","flat"),e.joinstyle=s.lineJoin):e&&(h.removeChild(e),t._stroke=null),s.fill?(n||(n=t._fill=Te("fill")),h.appendChild(n),n.color=s.fillColor||s.color,n.opacity=s.fillOpacity):n&&(h.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),s=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+s+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){te(t._container)},_bringToBack:function(t){ee(t._container)}},ni=E.vml?Te:On,Me=Dt.extend({_initContainer:function(){this._container=ni("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ni("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){J(this._container),K(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Dt.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),rt(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=ni("path");t.options.className&&N(e,t.options.className),t.options.interactive&&N(e,"leaflet-interactive"),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){J(t._path),t.removeInteractiveTarget(t._path),delete this._layers[d(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Bn(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),s=Math.max(Math.round(t._radiusY),1)||n,h="a"+n+","+s+" 0 1,0 ",l=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+h+n*2+",0 "+h+-n*2+",0 ";this._setPath(t,l)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){te(t._path)},_bringToBack:function(t){ee(t._path)}});E.vml&&Me.include(da);function Ar(t){return E.svg||E.vml?new Me(t):null}$.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Er(t)||Ar(t)}});var Ir=re.extend({initialize:function(t,e){re.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=nt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function pa(t,e){return new Ir(t,e)}Me.create=ni,Me.pointsToPath=Bn,Nt.geometryToLayer=Ke,Nt.coordsToLatLng=rn,Nt.coordsToLatLngs=je,Nt.latLngToCoords=on,Nt.latLngsToCoords=Je,Nt.getFeature=oe,Nt.asFeature=Qe,$.mergeOptions({boxZoom:!0});var zr=Et.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Z(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){K(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){J(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ge(),Fi(),this._startPoint=this._map.mouseEventToContainerPoint(t),Z(document,{contextmenu:qt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=W("div","leaflet-zoom-box",this._container),N(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new j(this._point,this._startPoint),n=e.getSize();rt(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(J(this._box),et(this._container,"leaflet-crosshair")),ve(),Hi(),K(document,{contextmenu:qt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var e=new dt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});$.addInitHook("addHandler","boxZoom",zr),$.mergeOptions({doubleClickZoom:!0});var Or=Et.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),s=e.options.zoomDelta,h=t.originalEvent.shiftKey?n-s:n+s;e.options.doubleClickZoom==="center"?e.setZoom(h):e.setZoomAround(t.containerPoint,h)}});$.addInitHook("addHandler","doubleClickZoom",Or),$.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Br=Et.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new $t(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}N(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){et(this._map._container,"leaflet-grab"),et(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=nt(this._map.options.maxBounds);this._offsetLimit=ft(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,s=this._draggable._newPos.x,h=(s-e+n)%t+e-n,l=(s+e+n)%t-e-n,m=Math.abs(h+n)<Math.abs(l+n)?h:l;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=m},_onDragEnd:function(t){var e=this._map,n=e.options,s=!n.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),s)e.fire("moveend");else{this._prunePositions(+new Date);var h=this._lastPos.subtract(this._positions[0]),l=(this._lastTime-this._times[0])/1e3,m=n.easeLinearity,x=h.multiplyBy(m/l),P=x.distanceTo([0,0]),b=Math.min(n.inertiaMaxSpeed,P),S=x.multiplyBy(b/P),I=b/(n.inertiaDeceleration*m),R=S.multiplyBy(-I/2).round();!R.x&&!R.y?e.fire("moveend"):(R=e._limitOffset(R,e.options.maxBounds),C(function(){e.panBy(R,{duration:I,easeLinearity:m,noMoveStart:!0,animate:!0})}))}}});$.addInitHook("addHandler","dragging",Br),$.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Zr=Et.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Z(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),K(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,s=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(s,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},n=this.keyCodes,s,h;for(s=0,h=n.left.length;s<h;s++)e[n.left[s]]=[-1*t,0];for(s=0,h=n.right.length;s<h;s++)e[n.right[s]]=[t,0];for(s=0,h=n.down.length;s<h;s++)e[n.down[s]]=[0,t];for(s=0,h=n.up.length;s<h;s++)e[n.up[s]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},n=this.keyCodes,s,h;for(s=0,h=n.zoomIn.length;s<h;s++)e[n.zoomIn[s]]=t;for(s=0,h=n.zoomOut.length;s<h;s++)e[n.zoomOut[s]]=-t},_addHooks:function(){Z(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){K(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,n=this._map,s;if(e in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(s=this._panKeys[e],t.shiftKey&&(s=O(s).multiplyBy(3)),n.options.maxBounds&&(s=n._limitOffset(O(s),n.options.maxBounds)),n.options.worldCopyJump){var h=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(s)));n.panTo(h)}else n.panBy(s)}else if(e in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&n._popup&&n._popup.options.closeOnEscapeKey)n.closePopup();else return;qt(t)}}});$.addInitHook("addHandler","keyboard",Zr),$.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Nr=Et.extend({addHooks:function(){Z(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){K(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=ar(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var s=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),s),qt(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var s=this._delta/(this._map.options.wheelPxPerZoomLevel*4),h=4*Math.log(2/(1+Math.exp(-Math.abs(s))))/Math.LN2,l=n?Math.ceil(h/n)*n:h,m=t._limitZoom(e+(this._delta>0?l:-l))-e;this._delta=0,this._startTime=null,m&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+m):t.setZoomAround(this._lastMousePos,e+m))}});$.addInitHook("addHandler","scrollWheelZoom",Nr);var _a=600;$.mergeOptions({tapHold:E.touchNative&&E.safari&&E.mobile,tapTolerance:15});var Dr=Et.extend({addHooks:function(){Z(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){K(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new z(e.clientX,e.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(Z(document,"touchend",ut),Z(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),_a),Z(document,"touchend touchcancel contextmenu",this._cancel,this),Z(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){K(document,"touchend",ut),K(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),K(document,"touchend touchcancel contextmenu",this._cancel,this),K(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new z(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});n._simulated=!0,e.target.dispatchEvent(n)}});$.addInitHook("addHandler","tapHold",Dr),$.mergeOptions({touchZoom:E.touch,bounceAtZoomLimits:!0});var Rr=Et.extend({addHooks:function(){N(this._map._container,"leaflet-touch-zoom"),Z(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){et(this._map._container,"leaflet-touch-zoom"),K(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var n=e.mouseEventToContainerPoint(t.touches[0]),s=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(s)._divideBy(2))),this._startDist=n.distanceTo(s),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Z(document,"touchmove",this._onTouchMove,this),Z(document,"touchend touchcancel",this._onTouchEnd,this),ut(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),s=e.mouseEventToContainerPoint(t.touches[1]),h=n.distanceTo(s)/this._startDist;if(this._zoom=e.getScaleZoom(h,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&h<1||this._zoom>e.getMaxZoom()&&h>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,h===1)return}else{var l=n._add(s)._divideBy(2)._subtract(this._centerPoint);if(h===1&&l.x===0&&l.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(l),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),q(this._animRequest);var m=f(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=C(m,this,!0),ut(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,q(this._animRequest),K(document,"touchmove",this._onTouchMove,this),K(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});$.addInitHook("addHandler","touchZoom",Rr),$.BoxZoom=zr,$.DoubleClickZoom=Or,$.Drag=Br,$.Keyboard=Zr,$.ScrollWheelZoom=Nr,$.TapHold=Dr,$.TouchZoom=Rr,o.Bounds=j,o.Browser=E,o.CRS=Ot,o.Canvas=Cr,o.Circle=nn,o.CircleMarker=Xe,o.Class=lt,o.Control=Lt,o.DivIcon=Mr,o.DivOverlay=At,o.DomEvent=zs,o.DomUtil=As,o.Draggable=$t,o.Evented=kt,o.FeatureGroup=Bt,o.GeoJSON=Nt,o.GridLayer=be,o.Handler=Et,o.Icon=ne,o.ImageOverlay=ti,o.LatLng=Y,o.LatLngBounds=dt,o.Layer=Pt,o.LayerGroup=ie,o.LineUtil=Vs,o.Map=$,o.Marker=Ye,o.Mixin=Fs,o.Path=Gt,o.Point=z,o.PolyUtil=Hs,o.Polygon=re,o.Polyline=Zt,o.Popup=ei,o.PosAnimation=hr,o.Projection=qs,o.Rectangle=Ir,o.Renderer=Dt,o.SVG=Me,o.SVGOverlay=Tr,o.TileLayer=se,o.Tooltip=ii,o.Transformation=Si,o.Util=st,o.VideoOverlay=br,o.bind=f,o.bounds=ft,o.canvas=Er,o.circle=ea,o.circleMarker=ta,o.control=xe,o.divIcon=la,o.extend=u,o.featureGroup=js,o.geoJSON=Pr,o.geoJson=ra,o.gridLayer=ca,o.icon=Js,o.imageOverlay=oa,o.latLng=H,o.latLngBounds=nt,o.layerGroup=Ks,o.map=Os,o.marker=Qs,o.point=O,o.polygon=na,o.polyline=ia,o.popup=ha,o.rectangle=pa,o.setOptions=T,o.stamp=d,o.svg=Ar,o.svgOverlay=aa,o.tileLayer=kr,o.tooltip=ua,o.transformation=de,o.version=a,o.videoOverlay=sa;var ma=window.L;o.noConflict=function(){return window.L=ma,this},window.L=o})}(ze,ze.exports)),ze.exports}var Ce=Xc();(function(){function i(r){return this instanceof i?(this._canvas=r=typeof r=="string"?document.getElementById(r):r,this._ctx=r.getContext("2d"),this._width=r.width,this._height=r.height,this._max=1,void this.clear()):new i(r)}i.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(r,o){return this._data=r,this},max:function(r){return this._max=r,this},add:function(r){return this._data.push(r),this},clear:function(){return this._data=[],this},radius:function(r,o){o=o||15;var a=this._circle=document.createElement("canvas"),u=a.getContext("2d"),c=this._r=r+o;return a.width=a.height=2*c,u.shadowOffsetX=u.shadowOffsetY=200,u.shadowBlur=o,u.shadowColor="black",u.beginPath(),u.arc(c-200,c-200,r,0,2*Math.PI,!0),u.closePath(),u.fill(),this},gradient:function(r){var o=document.createElement("canvas"),a=o.getContext("2d"),u=a.createLinearGradient(0,0,0,256);o.width=1,o.height=256;for(var c in r)u.addColorStop(c,r[c]);return a.fillStyle=u,a.fillRect(0,0,1,256),this._grad=a.getImageData(0,0,1,256).data,this},draw:function(r){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var o=this._ctx;o.clearRect(0,0,this._width,this._height);for(var a,u=0,c=this._data.length;c>u;u++)a=this._data[u],o.globalAlpha=Math.max(a[2]/this._max,r||.05),o.drawImage(this._circle,a[0]-this._r,a[1]-this._r);var f=o.getImageData(0,0,this._width,this._height);return this._colorize(f.data,this._grad),o.putImageData(f,0,0),this},_colorize:function(r,o){for(var a,u=3,c=r.length;c>u;u+=4)a=4*r[u],a&&(r[u-3]=o[a],r[u-2]=o[a+1],r[u-1]=o[a+2])}},window.simpleheat=i})(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(i,r){this._latlngs=i,L.setOptions(this,r)},setLatLngs:function(i){return this._latlngs=i,this.redraw()},addLatLng:function(i){return this._latlngs.push(i),this.redraw()},setOptions:function(i){return L.setOptions(this,i),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(i){this._map=i,this._canvas||this._initCanvas(),i._panes.overlayPane.appendChild(this._canvas),i.on("moveend",this._reset,this),i.options.zoomAnimation&&L.Browser.any3d&&i.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(i){i.getPanes().overlayPane.removeChild(this._canvas),i.off("moveend",this._reset,this),i.options.zoomAnimation&&i.off("zoomanim",this._animateZoom,this)},addTo:function(i){return i.addLayer(this),this},_initCanvas:function(){var i=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),r=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);i.style[r]="50% 50%";var o=this._map.getSize();i.width=o.x,i.height=o.y;var a=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(i,"leaflet-zoom-"+(a?"animated":"hide")),this._heat=simpleheat(i),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var i=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,i);var r=this._map.getSize();this._heat._width!==r.x&&(this._canvas.width=this._heat._width=r.x),this._heat._height!==r.y&&(this._canvas.height=this._heat._height=r.y),this._redraw()},_redraw:function(){var i,r,o,a,u,c,f,p,d,_=[],y=this._heat._r,g=this._map.getSize(),v=new L.Bounds(L.point([-y,-y]),g.add([y,y])),w=this.options.max===void 0?1:this.options.max,M=this.options.maxZoom===void 0?this._map.getMaxZoom():this.options.maxZoom,T=1/Math.pow(2,Math.max(0,Math.min(M-this._map.getZoom(),12))),A=y/2,D=[],U=this._map._getMapPanePos(),B=U.x%A,Q=U.y%A;for(i=0,r=this._latlngs.length;r>i;i++)if(o=this._map.latLngToContainerPoint(this._latlngs[i]),v.contains(o)){u=Math.floor((o.x-B)/A)+2,c=Math.floor((o.y-Q)/A)+2;var k=this._latlngs[i].alt!==void 0?this._latlngs[i].alt:this._latlngs[i][2]!==void 0?+this._latlngs[i][2]:1;d=k*T,D[c]=D[c]||[],a=D[c][u],a?(a[0]=(a[0]*a[2]+o.x*d)/(a[2]+d),a[1]=(a[1]*a[2]+o.y*d)/(a[2]+d),a[2]+=d):D[c][u]=[o.x,o.y,d]}for(i=0,r=D.length;r>i;i++)if(D[i])for(f=0,p=D[i].length;p>f;f++)a=D[i][f],a&&_.push([Math.round(a[0]),Math.round(a[1]),Math.min(a[2],w)]);this._heat.data(_).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(i){var r=this._map.getZoomScale(i.zoom),o=this._map._getCenterOffset(i.center)._multiplyBy(-r).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,o,r):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(o)+" scale("+r+")"}}),L.heatLayer=function(i,r){return new L.HeatLayer(i,r)};class Jo{developerLocations=[];map=null;svgOverlay=null;svgGroup=null;heatLayer=null;heatConsistsOfPins=!1;devPinIsActive=!1;originalDeveloperLocations=[];set locations(r){this.developerLocations=r,this.originalDeveloperLocations=[...r],this.updateHeatmap()}show(r){if(!this.map){console.log("Initializing map..."),this.map=Ce.map(r,{center:[20,0],zoom:2,worldCopyJump:!0,layers:[Ce.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"})]}),console.log("Map initialized successfully:",this.map),this.map.dragging.disable(),this.map.scrollWheelZoom.disable(),this.svgOverlay=it(this.map.getPanes().overlayPane).append("svg").attr("style","pointer-events: none;"),this.svgGroup=this.svgOverlay.append("g").attr("class","leaflet-zoom-hide");const o=this.map.getBounds(),a=this.map.latLngToLayerPoint(o.getNorthWest()),u=this.map.latLngToLayerPoint(o.getSouthEast());this.svgOverlay.attr("width",u.x-a.x).attr("height",u.y-a.y).style("left",`${a.x}px`).style("top",`${a.y}px`),this.svgGroup.attr("transform",`translate(${-a.x},${-a.y})`),console.log("SVG group initialized:",this.svgGroup),this.map.on("click",()=>{this.map.dragging.enable(),this.map.scrollWheelZoom.enable()}),this.map.on("mouseout",()=>{this.map.dragging.disable(),this.map.scrollWheelZoom.disable()}),this.updateHeatmap()}}updateHeatmap(){!this.map||this.devPinIsActive||(console.log("Updating heatmap. heatConsistsOfPins:",this.heatConsistsOfPins),this.heatConsistsOfPins?this.showPins():this.showHeatmap())}showHeatmap(){if(!this.map)return;console.log("(Re-)Initializing heatmap..."),this.svgGroup?.selectAll("circle").remove(),this.heatLayer&&this.map.removeLayer(this.heatLayer),console.log("Developer locations:",this.developerLocations);const r=this.developerLocations.map(o=>[o.Latitude,o.Longitude,this.calcWeight(o)]);this.heatLayer=Ce.heatLayer(r,{radius:25,blur:15,maxZoom:10,gradient:{0:"rgba(0, 0, 255, 0)",.1:"rgba(0, 255, 255, 0.6)",.2:"rgba(0, 255, 0, 0.7)",.4:"rgba(255, 255, 0, 0.8)",.6:"rgba(255, 165, 0, 0.9)",.8:"rgba(255, 0, 0, 0.9)",1:"rgba(128, 0, 128, 1.0)"}}).addTo(this.map),console.log("Heatmap (re-)initialized")}calcWeight(r){const a=Ce.latLng(r.Latitude,r.Longitude),u=this.map.latLngToLayerPoint(a),c=2,f=10,p=this.developerLocations.reduce((_,y)=>{const g=Ce.latLng(y.Latitude,y.Longitude),v=this.map.latLngToLayerPoint(g);return u.distanceTo(v)<=1e3?_+1:_},0);let d=c+p*.5;return d=Math.min(d,f),d}calcDensityThresholds(){const r=[0,.1,.2,.4,.6,.8,1],o=this.developerLocations.length;return r.map(a=>Math.ceil(a*o))}showPins(){if(!this.map||!this.svgOverlay||!this.svgGroup)return;this.heatLayer&&(this.map.removeLayer(this.heatLayer),this.heatLayer=null),this.svgGroup.selectAll("circle").remove();const r=f=>this.map.latLngToLayerPoint(f),o=this.svgGroup.selectAll("circle").data(this.developerLocations),a=o.enter().append("circle").attr("opacity",.4),u=()=>{const f=this.map.getZoom(),p=this.calculateCircleRadius(f);o.merge(a).attr("cx",d=>r([d.Latitude,d.Longitude]).x).attr("cy",d=>r([d.Latitude,d.Longitude]).y).attr("r",p).attr("fill",d=>this.determineColorBasedOnDensity(d,p))},c=this.throttle(u,100);this.map.on("zoomend",()=>{this.updateHeatmap(),c()}),this.map.on("moveend",()=>{this.updateHeatmap(),c()}),u()}toggleHeatmapMode(){this.heatConsistsOfPins=!this.heatConsistsOfPins,console.log("Toggled heatmap mode. heatConsistsOfPins:",this.heatConsistsOfPins),this.updateHeatmap()}filterOutDevs(r){const o=this.developerLocations.filter(a=>a.Developer===r);this.developerLocations=o,this.updateHeatmap()}resetDeveloperFilter(){this.updateHeatmap()}resetDeveloperLocations(){this.developerLocations=[...this.originalDeveloperLocations],this.updateHeatmap()}calculateCircleRadius(r){return Math.max(5,Math.min(10*(r-1),20))}determineColorBasedOnDensity(r,o){const a=this.developerLocations.reduce((u,c)=>this.getDistanceBetweenLocations(r,c)<=o?u+1:u,0);return a>20?"red":a>10?"orange":a>5?"yellow":"green"}getDistanceBetweenLocations(r,o){const a=r.Latitude,u=r.Longitude,c=o.Latitude,f=o.Longitude,p=6371e3,d=a*Math.PI/180,_=c*Math.PI/180,y=(c-a)*Math.PI/180,g=(f-u)*Math.PI/180,v=Math.sin(y/2)*Math.sin(y/2)+Math.cos(d)*Math.cos(_)*Math.sin(g/2)*Math.sin(g/2),w=2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v));return p*w}throttle(r,o){let a=0;return(...u)=>{const c=new Date().getTime();c-a>=o&&(a=c,r(...u))}}showADevPin(r,o){if(!this.map||!this.svgGroup)return;this.svgGroup.selectAll(".developer-pin").remove(),this.svgGroup?.selectAll("circle").remove(),this.heatLayer&&(this.map.removeLayer(this.heatLayer),this.heatLayer=null),console.log("Adding pin at:",r,o);const a=this.svgGroup?.append("circle").attr("class","developer-pin").attr("cx",this.map.latLngToLayerPoint([r,o]).x).attr("cy",this.map.latLngToLayerPoint([r,o]).y).attr("r",8).attr("fill","red"),u=()=>{a?.attr("cx",this.map.latLngToLayerPoint([r,o]).x).attr("cy",this.map.latLngToLayerPoint([r,o]).y);const f=this.map.getBounds(),p=this.map.latLngToLayerPoint(f.getNorthWest()),d=this.map.latLngToLayerPoint(f.getSouthEast());this.svgOverlay.attr("width",d.x-p.x).attr("height",d.y-p.y).style("left",`${p.x}px`).style("top",`${p.y}px`),this.svgGroup.attr("transform",`translate(${-p.x},${-p.y})`)};this.map.on("zoomend",u),this.map.on("moveend",u),this.map.dragging.enable(),this.map.scrollWheelZoom.enable(),this.devPinIsActive=!0;const c=document.getElementById("reset-pin-to-heat-button");c&&(c.style.display="block")}removeTheDevPin(){if(!this.map||!this.svgGroup)return;this.devPinIsActive&&(this.svgGroup.selectAll(".developer-pin").remove(),this.map.dragging.disable(),this.map.scrollWheelZoom.disable(),this.devPinIsActive=!1,console.log("Developer pin removed, reinitializing heatmap")),this.resetDeveloperLocations(),this.heatLayer?this.updateHeatmap():this.heatConsistsOfPins?this.showPins():this.showHeatmap();const r=document.getElementById("reset-pin-to-heat-button");r&&(r.style.display="none")}}const Qo="b062cd97f3414aea899acb6ae86b344b";async function Kc(i){const r=await Jc(i);if(!r)return;const o=await jc(r);if(o)return{game:{name:o.name,date:new Date(o.released),genre:o.genres.map(a=>a.name).join(", "),platform:o.platforms.map(a=>a.platform.name).join(", "),publisher:o.publishers.map(a=>a.name).join(", "),developer:o.developers.map(a=>a.name).join(", ")}}}async function jc(i){try{const r=`https://api.rawg.io/api/games/${i}?key=${Qo}`;return await(await fetch(r)).json()}catch(r){console.error(r);return}}async function Jc(i){try{const o=`https://api.rawg.io/api/games?search=${encodeURIComponent(i)}&key=${Qo}&page_size=1`,u=await(await fetch(o)).json();return u.count===0?void 0:u.results[0].slug}catch(r){console.error(r);return}}function Pi(i){let r=!1,o=0,a=0;i.addEventListener("mousedown",u=>{r=!0,o=u.clientX-i.getBoundingClientRect().left,a=u.clientY-i.getBoundingClientRect().top,i.classList.add("dragging")}),document.addEventListener("mousemove",u=>{if(!r)return;const c=u.clientX-o,f=u.clientY-a;i.style.left=`${c}px`,i.style.top=`${f}px`,i.style.bottom="auto",i.style.right="auto"}),document.addEventListener("mouseup",()=>{r=!1,i.classList.remove("dragging")})}class Qc{legendElement;isVisible=!1;heatmap;constructor(r){this.legendElement=document.createElement("div"),this.legendElement.classList.add("legend-popup"),this.legendElement.style.display="none",this.legendElement.style.position="fixed",document.body.appendChild(this.legendElement),this.heatmap=new Jo,this.heatmap.locations=r,this.createStaticLegendContent(),Pi(this.legendElement)}createStaticLegendContent(){const r=this.heatmap.calcDensityThresholds();this.legendElement.innerHTML=`
          <h3 class="heat-legend-header">Heatmap-Legende</h3>
          <p>Der Heat wird über die Menge der Entwickler-Positionen bestimmt.</p>
          <div class="legend-gradient"></div>
          <div class="legend-labels">
            ${r.map(o=>`<div class="label">${o}</div>`).join("")}
          </div>
    `}toggleLegendVisibility(){this.isVisible=!this.isVisible,this.legendElement.style.display=this.isVisible?"block":"none"}}function tf(i){const r=document.getElementById("open-popup-button"),o=document.getElementById("close-popup-button"),a=document.getElementById("add-new-game-button"),u=document.getElementById("add-new-popup"),c=document.getElementById("add-new-game");r.addEventListener("click",()=>{u.style.display="block"}),o.addEventListener("click",()=>{u.style.display="none"}),a.addEventListener("click",async()=>{const f=c.value.trim();if(!f){alert("Bitte geben Sie einen Spielnamen ein.");return}await i.addNewGame(f),u.style.display="none",alert("Spiel hinzugefügt!")}),window.addEventListener("click",f=>{f.target===u&&(u.style.display="none")})}class ef{constructor(r,o){this.games=r,this.locations=o}_updaters=[];_filteredGameStudio;_filteredStartYear;_filteredEndYear;_filteredGenres=new Set;_filteredPlatforms=new Set;onFilterUpdate(r){this._updaters.push(r)}setGameStudioFilter(r){this._filteredGameStudio=r,this.pushFilterUpdate()}resetGameStudioFilter(){this._filteredGameStudio=void 0,this.pushFilterUpdate()}setYearFilter(r,o){this._filteredStartYear=r,this._filteredEndYear=o,this.pushFilterUpdate()}resetYearFilter(){this._filteredStartYear=void 0,this._filteredEndYear=void 0,this.pushFilterUpdate()}pushFilterUpdate(){this._updaters.forEach(r=>r(this))}getGameDetails(r){return this.games.find(o=>o.name===r)}setGenreFilter(r){this._filteredGenres=r,this.pushFilterUpdate()}resetGenreFilter(){this._filteredGenres.clear(),this.pushFilterUpdate()}setPlatformFilter(r){this._filteredPlatforms=r,this.pushFilterUpdate()}resetPlatformFilter(){this._filteredPlatforms.clear(),this.pushFilterUpdate()}getUniquePropertyVals(r){const o=new Set;return this.games.forEach(a=>{const u=a[r];typeof u=="string"&&u.split("|").forEach(c=>o.add(c))}),o}get filteredGames(){return this.games.filter(r=>{if(isNaN(r.date.getTime())||this._filteredGameStudio&&r.developer!==this._filteredGameStudio||this._filteredStartYear&&r.date.getFullYear()<this._filteredStartYear||this._filteredEndYear&&r.date.getFullYear()>this._filteredEndYear)return!1;if(this._filteredGenres.size>0){const o=new Set(r.genre.split("|"));if(![...this._filteredGenres].some(a=>o.has(a)))return!1}if(this._filteredPlatforms.size>0){const o=new Set(r.platform.split("|"));if(![...this._filteredPlatforms].some(a=>o.has(a)))return!1}return!0})}get filteredLocations(){const r=this.filteredGames;return console.log("filteredLocations",r),this.locations.filter(o=>this._filteredGameStudio&&o.Developer!==this._filteredGameStudio?!1:r.filter(a=>a.developer===o.Developer).length>0)}async addNewGame(r){const o=await Kc(r);if(!o){alert("Spiel oder Spieleentwickler nicht gefunden");return}this.games.push(o.game),console.log(o.game,o.game.date.getFullYear()),this.pushFilterUpdate()}}function ts(i){const r=i.genre==="Unknown"?"Unbekannt":i.genre==="Misc"?"Miscellaneous":i.genre,o=i.platform.replace(/\|/g," | ");let a=`
        <p><strong>Name:</strong> ${i.name}</p>
        <p><strong>Genre(s):</strong> ${r}</p>
        <p><strong>Plattform(en):</strong> ${o}</p>
        <p><strong>Publisher:</strong> ${i.publisher}</p>
        <p><strong>Entwickler:</strong> ${i.developer}</p>
        <p><strong>Erscheinungsdatum:</strong> ${i.date.toDateString()}</p>
        `;i.shipped!==void 0&&i.shipped!==0&&(a+=`<p><strong>Ausgelieferte Einheiten:</strong> ${i.shipped} Millionen</p>`),i.total!==void 0&&i.total!==0&&(a+=`<p><strong>Gesamtverkäufe:</strong> ${i.total*10} Millionen</p>`),i.europe!==void 0&&i.europe!==0&&(a+=`<p><strong>Verkäufe in Europa:</strong> ${i.europe*10} Millionen</p>`),i.japan!==void 0&&i.japan!==0&&(a+=`<p><strong>Verkäufe in Japan:</strong> ${i.japan*10} Millionen</p>`),i.america!==void 0&&i.america!==0&&(a+=`<p><strong>Verkäufe in Amerika:</strong> ${i.america*10} Millionen</p>`),i.other!==void 0&&i.other!==0&&(a+=`<p><strong>Verkäufe in anderen Gebieten:</strong> ${i.other*10} Millionen</p>`),i.critic!==void 0&&i.critic!==0&&(a+=`<p><strong>Presse-Score:</strong> ${i.critic}</p>`),i.user!==void 0&&i.user!==0&&(a+=`<p><strong>Spieler-Score:</strong> ${i.user}</p>`);const u=document.getElementById("game-info-content");u.innerHTML=a;const c=document.getElementById("game-info-sidebar");c.style.display="block"}async function nf(){const r=(await ho("/data/studios_geocode.csv")).map(k=>({Developer:k.Developer,Latitude:parseFloat(k.Latitude),Longitude:parseFloat(k.Longitude),PlaceName:k["Place Name"],Address:k.Address})),a=(await ho("/data/unified_data.csv")).map(k=>({name:k.name,date:new Date(k.date),platform:k.platform,publisher:k.publisher,developer:k.developer,genre:k.genre,shipped:k.shipped?parseInt(k.shipped):void 0,total:k.total?parseInt(k.total):void 0,europe:k.europe?parseInt(k.europe):void 0,japan:k.japan?parseInt(k.japan):void 0,america:k.america?parseInt(k.america):void 0,other:k.other?parseInt(k.other):void 0,critic:k.critic?parseInt(k.critic):void 0,user:k.user?parseInt(k.user):void 0})),u=new Map;a.forEach(k=>{u.has(k.name)||u.set(k.name,k)});const c=Array.from(u.values()),f=Array.from(new Set(c.map(k=>k.developer))).sort(),p=new ef(c,r),d=await rf(p,f);await of(p,d),tf(p);const _=document.getElementById("game-title-search");document.getElementById("game-title-search-button").addEventListener("click",async()=>{const k=_.value.trim();if(!k){alert("Bitte geben Sie einen Spielnamen ein.");return}const X=p.getGameDetails(k);if(!X){alert("Spiel nicht gefunden.");return}ts(X);const G=X.developer;d.filterOutDevs(G);const F=p.filteredLocations.find(tt=>tt.Developer===G);F?(console.log("Showing pin for developer:",G),d.showADevPin(F.Latitude,F.Longitude)):console.log("No location found for developer:",G);const V=X.date.getFullYear();p.setYearFilter(V,V),document.getElementById("timeline-from-filter")?.setAttribute("value",V.toString()),document.getElementById("timeline-to-filter")?.setAttribute("value",V.toString()),_.value=""});const g=p.getUniquePropertyVals("genre");console.log(g);const v=document.getElementById("open-genre-settings-filter"),w=document.getElementById("genre-filter-popup"),M=document.getElementById("genre-filter-content"),T=document.getElementById("close-genre-filter-button");Pi(w),v.addEventListener("click",()=>{w.style.display="block",M.innerHTML="",Array.from(g).sort().forEach(F=>{const V=document.createElement("input");V.type="checkbox",V.id=F,V.value=F;const tt=document.createElement("label");tt.htmlFor=F,tt.textContent=F;const C=document.createElement("div");C.appendChild(V),C.appendChild(tt),M.appendChild(C)});const X=document.getElementById("apply-genre-filter-button"),G=document.getElementById("reset-genre-filter");X.addEventListener("click",()=>{const F=new Set;M.querySelectorAll('input[type="checkbox"]:checked').forEach(V=>{F.add(V.value)}),p.setGenreFilter(F),w.style.display="none",G.style.removeProperty("display")}),G.addEventListener("click",()=>{p.resetGenreFilter(),G.style.display="none"}),T.addEventListener("click",()=>{w.style.display="none"})});const A=p.getUniquePropertyVals("platform");console.log(A);const D=document.getElementById("open-platform-settings-filter"),U=document.getElementById("platform-filter-popup"),B=document.getElementById("platform-filter-content"),Q=document.getElementById("close-platform-filter-button");Pi(U),D.addEventListener("click",()=>{U.style.display="block",B.innerHTML="",Array.from(A).filter(F=>F.trim()!=="").sort().forEach(F=>{const V=document.createElement("input");V.type="checkbox",V.id=F,V.value=F;const tt=document.createElement("label");tt.htmlFor=F,tt.textContent=F;const C=document.createElement("div");C.appendChild(V),C.appendChild(tt),B.appendChild(C)});const X=document.getElementById("apply-platform-filter-button"),G=document.getElementById("reset-plaform-filter");X.addEventListener("click",()=>{const F=new Set;B.querySelectorAll('input[type="checkbox"]:checked').forEach(V=>{F.add(V.value)}),p.setPlatformFilter(F),U.style.display="none",G.style.removeProperty("display")}),G.addEventListener("click",()=>{p.resetPlatformFilter(),G.style.display="none"}),Q.addEventListener("click",()=>{U.style.display="none"})})}async function rf(i,r){const o=document.getElementById("map-canvas"),a=new Jo;a.locations=i.filteredLocations,a.show(o);const u=new Qc(i.filteredLocations);let c=!0;const f=document.querySelector(".open-legend-button");f.addEventListener("click",()=>{c=!c,f.innerText=c?"Legende einblenden":"Legende ausblenden",u.toggleLegendVisibility()}),i.onFilterUpdate(g=>{console.log(g.filteredLocations.length),a.locations=g.filteredLocations});const p=it("#game-developer-filter");p.append("option").text("Alle Studios").attr("value",""),r.forEach(g=>{p.append("option").text(g).attr("value",g)}),p.on("change",()=>{const g=p.property("value");if(g!==""){i.setGameStudioFilter(g);const v=i.filteredLocations.find(w=>w.Developer===g);v?(console.log("Showing pin for developer:",g),a.showADevPin(v.Latitude,v.Longitude)):console.log("No location found for developer:",g)}else i.resetGameStudioFilter(),a.removeTheDevPin()});const d=document.getElementById("toggle-heatmap-mode");return d.addEventListener("click",()=>{a.toggleHeatmapMode(),d.innerText=a.heatConsistsOfPins?"Wechsel zu Heatmap":"Wechsel zu Pins"}),document.getElementById("reset-pin-to-heat-button").addEventListener("click",()=>{a.removeTheDevPin()}),document.getElementById("toggle-reinitialization-of-map").addEventListener("click",()=>{a.removeTheDevPin()}),a}async function of(i,r){const o=document.getElementById("timeline-canvas"),a=new qc,u=i.filteredGames,c=new Map;u.forEach(_=>c.set(_.name,_)),a.games=u.map(_=>({title:_.name,year:_.date.getFullYear(),game:_}));const f=document.getElementById("game-info-sidebar");document.getElementById("close-sidebar-button").addEventListener("click",()=>{f.style.display="none"}),a.onBarClick=(_,y)=>{const g=it("#timeline-games-list");g.selectAll("*").remove(),_.sort((v,w)=>v.game.name.localeCompare(w.game.name)).forEach(v=>{const w=v.game,M=w.genre==="Unknown"?"Unbekannt":w.genre==="Misc"?"Verschiedenes":w.genre,T=w.platform.replace(/\|/g," | ");let A=`Name: ${w.name}
Genre(s): ${M}
Plattform(en): ${T}
Publisher: ${w.publisher}
Entwickler: ${w.developer}
Erscheinungsdatum: ${w.date.toDateString()}`;w.shipped!==void 0&&w.shipped!==0&&(A+=`
Ausgelieferte Einheiten: ${w.shipped*10} Millionen`),w.total!==void 0&&w.total!==0&&(A+=`
Gesamtverkäufe: ${w.total*10} Millionen`),w.europe!==void 0&&w.europe!==0&&(A+=`
Verkäufe in Europa: ${w.europe*10} Millionen`),w.japan!==void 0&&w.japan!==0&&(A+=`
Verkäufe in Japan: ${w.japan*10} Millionen`),w.america!==void 0&&w.america!==0&&(A+=`
Verkäufe in Amerika: ${w.america*10} Millionen`),w.other!==void 0&&w.other!==0&&(A+=`
Verkäufe in anderen Gebieten: ${w.other*10} Millionen`),w.critic!==void 0&&w.critic!==0&&(A+=`
Presse-Score: ${w.critic}`),w.user!==void 0&&w.user!==0&&(A+=`
Spieler-Score: ${w.user}`),g.append("div").text(w.name).attr("title",A).style("cursor","pointer").style("margin","5px 0").on("mouseover",function(){it(this).style("color","blue")}).on("mouseout",function(){it(this).style("color","black")}).on("click",function(){ts(w);const D=w.developer;r.filterOutDevs(D);const U=i.filteredLocations.find(B=>B.Developer===D);U?(console.log("Showing pin for developer:",D),r.showADevPin(U.Latitude,U.Longitude)):console.log("No location found for developer:",D)})}),it("#timeline-games-year").text(y),i.setYearFilter(y,y),document.getElementById("timeline-from-filter")?.setAttribute("value",y.toString()),document.getElementById("timeline-to-filter")?.setAttribute("value",y.toString())},a.show(o);const d=document.getElementById("game-info-sidebar");Pi(d),it("#timeline-prev").on("click",()=>a.previousYear()),it("#timeline-next").on("click",()=>a.nextYear()),it("#timeline-interval-reset").on("click",()=>{i.resetYearFilter(),document.getElementById("timeline-from-filter").value="",document.getElementById("timeline-to-filter").value=""}),it("#timeline-interval-apply").on("click",()=>{const _=parseInt(document.getElementById("timeline-from-filter").value),y=parseInt(document.getElementById("timeline-to-filter").value);i.setYearFilter(_,y)}),i.onFilterUpdate(_=>{a.games=_.filteredGames.map(y=>({title:y.name,year:y.date.getFullYear(),game:y})),a.show(o)})}nf();
